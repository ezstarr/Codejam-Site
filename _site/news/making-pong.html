<!DOCTYPE HTML>
<html lang="en">

<head>
  <title>news/making-pong</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="A delightful language with friendly error messages, great performance, small assets, and no runtime exceptions.">
  <meta name="robots" content="index, follow">
  <link rel="shortcut icon" sizes="16x16 32x32 48x48 64x64 128x128 256x256" href="/favicon.ico">
  <link rel="stylesheet" rel="preload" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans|Courier+Prime&display=swap">
  <link rel="stylesheet" href="/assets/style.css">
  <link rel="stylesheet" href="/assets/highlight/styles/default.css">
  <script src="/assets/highlight/highlight.pack.js"></script>
</head>

<body>

<script type="text/javascript">
!function(F){"use strict";function e(e,n,t){return t.a=e,t.f=n,t}function s(t){return e(2,t,function(n){return function(e){return t(n,e)}})}function n(r){return e(3,r,function(t){return function(n){return function(e){return r(t,n,e)}}})}function t(i){return e(4,i,function(r){return function(t){return function(n){return function(e){return i(r,t,n,e)}}}})}function r(o){return e(5,o,function(i){return function(r){return function(t){return function(n){return function(e){return o(i,r,t,n,e)}}}}})}function N(a){return e(6,a,function(o){return function(i){return function(r){return function(t){return function(n){return function(e){return a(o,i,r,t,n,e)}}}}}})}function W(s){return e(7,s,function(a){return function(o){return function(i){return function(r){return function(t){return function(n){return function(e){return s(a,o,i,r,t,n,e)}}}}}}})}function z(u){return e(8,u,function(s){return function(a){return function(o){return function(i){return function(r){return function(t){return function(n){return function(e){return u(s,a,o,i,r,t,n,e)}}}}}}}})}function G(l){return e(9,l,function(u){return function(s){return function(a){return function(o){return function(i){return function(r){return function(t){return function(n){return function(e){return l(u,s,a,o,i,r,t,n,e)}}}}}}}}})}function f(e,n,t){return 2===e.a?e.f(n,t):e(n)(t)}function h(e,n,t,r){return 3===e.a?e.f(n,t,r):e(n)(t)(r)}function d(e,n,t,r,i){return 4===e.a?e.f(n,t,r,i):e(n)(t)(r)(i)}function l(e,n,t,r,i,o){return 5===e.a?e.f(n,t,r,i,o):e(n)(t)(r)(i)(o)}function B(e,n,t,r,i,o,a){return 6===e.a?e.f(n,t,r,i,o,a):e(n)(t)(r)(i)(o)(a)}var M=n(function(e,n,t){for(var r=Array(e),i=0;i<e;i++)r[i]=t(n+i);return r}),R=s(function(e,n){for(var t=Array(e),r=0;r<e&&n.b;r++)t[r]=n.a,n=n.b;return t.length=r,{a:t,b:n}}),H=(s(function(e,n){return n[e]}),n(function(e,n,t){for(var r=t.length,i=Array(r),o=0;o<r;o++)i[o]=t[o];return i[e]=n,i}),s(function(e,n){for(var t=n.length,r=Array(t+1),i=0;i<t;i++)r[i]=n[i];return r[t]=e,r}),n(function(e,n,t){for(var r=t.length,i=0;i<r;i++)n=f(e,t[i],n);return n}),n(function(e,n,t){for(var r=t.length-1;0<=r;r--)n=f(e,t[r],n);return n}));s(function(e,n){for(var t=n.length,r=Array(t),i=0;i<t;i++)r[i]=e(n[i]);return r}),n(function(e,n,t){for(var r=t.length,i=Array(r),o=0;o<r;o++)i[o]=f(e,n+o,t[o]);return i}),n(function(e,n,t){return t.slice(e,n)}),n(function(e,n,t){for(var r=n.length,i=e-r,e=r+(i=t.length<i?t.length:i),o=Array(e),a=0;a<r;a++)o[a]=n[a];for(a=0;a<i;a++)o[a+r]=t[a];return o}),s(function(e,n){return n}),s(function(e,n){return console.log(e+": <internals>"),n});function p(e){throw Error("https://github.com/elm/core/blob/1.0.0/hints/"+e+".md")}function D(e,n){for(var t,r=[],i=J(e,n,0,r);i&&(t=r.pop());i=J(t.a,t.b,0,r));return i}function J(e,n,t,r){if(100<t)r.push({a:e,b:n});else if(e!==n){if("object"!=typeof e||null===e||null===n)return"function"==typeof e&&p(5),!1;for(var i in e.$<0&&(e=_n(e),n=_n(n)),e)if(!J(e[i],n[i],t+1,r))return!1}return!0}s(D),s(function(e,n){return!D(e,n)});function a(e,n,t){if("object"!=typeof e)return e===n?0:e<n?-1:1;if(void 0===e.$)return(t=(t=a(e.a,n.a))||a(e.b,n.b))||a(e.c,n.c);for(;e.b&&n.b&&!(t=a(e.a,n.a));e=e.b,n=n.b);return t||(e.b?1:n.b?-1:0)}s(function(e,n){return a(e,n)<0}),s(function(e,n){return a(e,n)<1}),s(function(e,n){return 0<a(e,n)}),s(function(e,n){return 0<=a(e,n)});var V=s(function(e,n){e=a(e,n);return e<0?Pn:e?An:Sn}),i=0;s(function(e,n){if("string"==typeof e)return e+n;if(!e.b)return n;var t={$:1,a:e.a,b:n};e=e.b;for(var r=t;e.b;e=e.b)r=r.b={$:1,a:e.a,b:n};return t});var g={$:0};function Y(e,n){return{$:1,a:e,b:n}}var K=s(Y);function b(e){for(var n=g,t=e.length;t--;)n={$:1,a:e[t],b:n};return n}function U(e){for(var n=[];e.b;e=e.b)n.push(e.a);return n}var Q=n(function(e,n,t){for(var r=[];n.b&&t.b;n=n.b,t=t.b)r.push(f(e,n.a,t.a));return b(r)});t(function(e,n,t,r){for(var i=[];n.b&&t.b&&r.b;n=n.b,t=t.b,r=r.b)i.push(h(e,n.a,t.a,r.a));return b(i)}),r(function(e,n,t,r,i){for(var o=[];n.b&&t.b&&r.b&&i.b;n=n.b,t=t.b,r=r.b,i=i.b)o.push(d(e,n.a,t.a,r.a,i.a));return b(o)}),N(function(e,n,t,r,i,o){for(var a=[];n.b&&t.b&&r.b&&i.b&&o.b;n=n.b,t=t.b,r=r.b,i=i.b,o=o.b)a.push(l(e,n.a,t.a,r.a,i.a,o.a));return b(a)}),s(function(t,e){return b(U(e).sort(function(e,n){return a(t(e),t(n))}))}),s(function(t,e){return b(U(e).sort(function(e,n){e=f(t,e,n);return e===Sn?0:e===Pn?-1:1}))}),s(function(e,n){return e+n}),s(function(e,n){return e-n}),s(function(e,n){return e*n}),s(function(e,n){return e/n}),s(function(e,n){return e/n|0}),s(Math.pow),s(function(e,n){return n%e}),s(function(e,n){n%=e;return 0===e?p(11):0<n&&e<0||n<0&&0<e?n+e:n}),s(Math.atan2);var X=Math.ceil,Z=Math.floor,ee=Math.log;s(function(e,n){return e&&n}),s(function(e,n){return e||n}),s(function(e,n){return e!==n}),s(function(e,n){return e+n});s(function(e,n){return e+n});s(function(e,n){for(var t=n.length,r=Array(t),i=0;i<t;){var o=n.charCodeAt(i);55296>o||o>56319?(r[i]=e(n[i]),i++):(r[i]=e(n[i]+n[i+1]),i+=2)}return r.join("")}),s(function(e,n){for(var t=[],r=n.length,i=0;i<r;){var o=n[i],a=n.charCodeAt(i);i++,a<55296||56319<a||(o+=n[i],i++),e(o)&&t.push(o)}return t.join("")});n(function(e,n,t){for(var r=t.length,i=0;i<r;){var o=t[i],a=t.charCodeAt(i);i++,a<55296||56319<a||(o+=t[i],i++),n=f(e,o,n)}return n}),n(function(e,n,t){for(var r=t.length;r--;){var i=t[r],o=t.charCodeAt(r);n=f(e,i=o<56320||57343<o?i:t[--r]+i,n)}return n});var ne=s(function(e,n){return n.split(e)}),te=s(function(e,n){return n.join(e)}),re=n(function(e,n,t){return t.slice(e,n)});s(function(e,n){for(var t=n.length;t--;){var r=n[t],i=n.charCodeAt(t);if(e(r=i<56320||57343<i?r:n[--t]+r))return!0}return!1});var ie=s(function(e,n){for(var t=n.length;t--;){var r=n[t],i=n.charCodeAt(t);if(!e(r=i<56320||57343<i?r:n[--t]+r))return!1}return!0}),oe=s(function(e,n){return!!~n.indexOf(e)}),ae=(s(function(e,n){return 0==n.indexOf(e)}),s(function(e,n){return e.length<=n.length&&n.lastIndexOf(e)==n.length-e.length}),s(function(e,n){var t=e.length;if(t<1)return g;for(var r=0,i=[];-1<(r=n.indexOf(e,r));)i.push(r),r+=t;return b(i)}));s(function(e,n){return{$:6,d:e,b:n}}),s(function(e,n){return{$:7,e:e,b:n}});s(function(e,n){return{$:10,b:n,h:e}});var se=s(function(e,n){return{$:9,f:e,g:[n]}}),ue=n(function(e,n,t){return{$:9,f:e,g:[n,t]}}),le=(t(function(e,n,t,r){return{$:9,f:e,g:[n,t,r]}}),r(function(e,n,t,r,i){return{$:9,f:e,g:[n,t,r,i]}}),N(function(e,n,t,r,i,o){return{$:9,f:e,g:[n,t,r,i,o]}}),W(function(e,n,t,r,i,o,a){return{$:9,f:e,g:[n,t,r,i,o,a]}}),z(function(e,n,t,r,i,o,a,s){return{$:9,f:e,g:[n,t,r,i,o,a,s]}}),G(function(e,n,t,r,i,o,a,s,u){return{$:9,f:e,g:[n,t,r,i,o,a,s,u]}}),s(function(e,n){try{return m(e,JSON.parse(n))}catch(e){return $(f(Tn,"This is not valid JSON! "+e.message,n))}}),s(m));function m(e,n){switch(e.$){case 2:return e.b(n);case 5:return null===n?On(e.c):v("null",n);case 3:return fe(n)?ce(e.b,n,b):v("a LIST",n);case 4:return fe(n)?ce(e.b,n,he):v("an ARRAY",n);case 6:var t=e.d;return"object"==typeof n&&null!==n&&t in n?(o=m(e.b,n[t]),A(o)?o:$(f(Cn,t,o.a))):v("an OBJECT with a field named `"+t+"`",n);case 7:t=e.e;return fe(n)?t<n.length?(o=m(e.b,n[t]),A(o)?o:$(f(En,t,o.a))):v("a LONGER array. Need index "+t+" but only see "+n.length+" entries",n):v("an ARRAY",n);case 8:if("object"!=typeof n||null===n||fe(n))return v("an OBJECT",n);var r,i=g;for(r in n)if(n.hasOwnProperty(r)){var o=m(e.b,n[r]);if(!A(o))return $(f(Cn,r,o.a));i={$:1,a:{a:r,b:o.a},b:i}}return On(S(i));case 9:for(var a=e.f,s=e.g,u=0;u<s.length;u++){o=m(s[u],n);if(!A(o))return o;a=a(o.a)}return On(a);case 10:o=m(e.b,n);return A(o)?m(e.h(o.a),n):o;case 11:for(var l=g,c=e.g;c.b;c=c.b){o=m(c.a,n);if(A(o))return o;l={$:1,a:o.a,b:l}}return $(Ln(S(l)));case 1:return $(f(Tn,e.a,n));case 0:return On(e.a)}}function ce(e,n,t){for(var r=n.length,i=Array(r),o=0;o<r;o++){var a=m(e,n[o]);if(!A(a))return $(f(En,o,a.a));i[o]=a.a}return On(t(i))}function fe(e){return Array.isArray(e)||"undefined"!=typeof FileList&&e instanceof FileList}function he(n){return f(lt,n.length,function(e){return n[e]})}function v(e,n){return $(f(Tn,"Expecting "+e,n))}function u(e,n){if(e===n)return!0;if(e.$!==n.$)return!1;switch(e.$){case 0:case 1:return e.a===n.a;case 2:return e.b===n.b;case 5:return e.c===n.c;case 3:case 4:case 8:return u(e.b,n.b);case 6:return e.d===n.d&&u(e.b,n.b);case 7:return e.e===n.e&&u(e.b,n.b);case 9:return e.f===n.f&&de(e.g,n.g);case 10:return e.h===n.h&&u(e.b,n.b);case 11:return de(e.g,n.g)}}function de(e,n){var t=e.length;if(t!==n.length)return!1;for(var r=0;r<t;r++)if(!u(e[r],n[r]))return!1;return!0}var pe=s(function(e,n){return JSON.stringify(n,null,e)+""});function ge(e){return e}n(function(e,n,t){return t[e]=n,t});function be(e){return{$:0,a:e}}var me=s(function(e,n){return{$:3,b:e,d:n}});s(function(e,n){return{$:4,b:e,d:n}});var ve=0;function ye(e){e={$:0,e:ve++,f:e,g:null,h:[]};return _e(e),e}function we(n){return{$:2,b:function(e){e({$:0,a:ye(n)})},c:null}}function ke(e,n){e.h.push(n),_e(e)}var $e=s(function(n,t){return{$:2,b:function(e){ke(n,t),e({$:0,a:i})},c:null}});var xe=!1,je=[];function _e(e){if(je.push(e),!xe){for(xe=!0;e=je.shift();)!function(n){for(;n.f;){var e=n.f.$;if(0===e||1===e){for(;n.g&&n.g.$!==e;)n.g=n.g.i;if(!n.g)return;n.f=n.g.b(n.f.a),n.g=n.g.i}else{if(2===e)return n.f.c=n.f.b(function(e){n.f=e,_e(n)});if(5===e){if(0===n.h.length)return;n.f=n.f.b(n.h.shift())}else n.g={$:3===e?0:1,b:n.f.b,i:n.g},n.f=n.f.d}}}(e);xe=!1}}t(function(e,n,t,r){return Se(n,r,e.dz,e.eC,e.eh,function(){return function(){}})});function Se(e,n,t,r,i,o){var a=f(le,e,n?n.flags:void 0),s=(A(a)||p(2),{}),u=(a=t(a.a)).a,l=o(c,u),e=function(e,n){var t,r;for(r in y){var i=y[r];i.a&&((t=t||{})[r]=i.a(r,n)),e[r]=function(e,n){var r={g:n,h:void 0},i=e.c,o=e.d,a=e.e,s=e.f;return r.h=ye(f(me,function e(t){return f(me,e,{$:5,b:function(e){var n=e.a;return 0===e.$?h(o,r,n,t):a&&s?d(i,r,n.i,n.j,t):h(i,r,a?n.i:n.j,t)}})},e.b))}(i,n)}return t}(s,c);function c(e,n){a=f(r,e,u),l(u=a.a,n),Ce(s,a.b,i(u))}return Ce(s,a.b,i(u)),e?{ports:e}:{}}var y={};var Ae=s(function(n,t){return{$:2,b:function(e){n.g(t),e({$:0,a:i})},c:null}});s(function(e,n){return f($e,e.h,{$:0,a:n})});function Pe(n){return function(e){return{$:1,k:n,l:e}}}function Te(e){return{$:2,m:e}}s(function(e,n){return{$:3,n:e,o:n}});function Ce(e,n,t){var r,i={};for(r in Ee(!0,n,i,null),Ee(!1,t,i,null),e)ke(e[r],{$:"fx",a:i[r]||{i:g,j:g}})}function Ee(e,n,t,r){switch(n.$){case 1:var i=n.k,o=function(e,n,t,r){return f(e?y[n].e:y[n].f,function(e){for(var n=t;n;n=n.q)e=n.p(e);return e},r)}(e,i,r,n.l);return void(t[i]=function(e,n,t){return t=t||{i:g,j:g},e?t.i={$:1,a:n,b:t.i}:t.j={$:1,a:n,b:t.j},t}(e,o,t[i]));case 2:for(var a=n.m;a.b;a=a.b)Ee(e,a.a,t,r);return;case 3:Ee(e,n.o,t,{p:n.n,q:r})}}s(function(e,n){return n});var Oe;s(function(n,t){return function(e){return n(t(e))}});var c="undefined"!=typeof document?document:{};t(function(e,n,t,r){r=r.node;return r.parentNode.replaceChild(w(e,function(){}),r),{}});function Le(e){return{$:0,a:e}}var qe=s(function(o,a){return s(function(e,n){for(var t=[],r=0;n.b;n=n.b){var i=n.a;r+=i.b||0,t.push(i)}return r+=t.length,{$:1,c:a,d:Me(e),e:t,f:o,b:r}})})(void 0);s(function(o,a){return s(function(e,n){for(var t=[],r=0;n.b;n=n.b){var i=n.a;r+=i.b.b||0,t.push(i)}return r+=t.length,{$:2,c:a,d:Me(e),e:t,f:o,b:r}})})(void 0);s(function(e,n){return{$:4,j:e,k:n,b:1+(n.b||0)}});s(function(e,n){return{$:5,l:[e,n],m:function(){return e(n)},k:void 0}}),n(function(e,n,t){return{$:5,l:[e,n,t],m:function(){return f(e,n,t)},k:void 0}}),t(function(e,n,t,r){return{$:5,l:[e,n,t,r],m:function(){return h(e,n,t,r)},k:void 0}}),r(function(e,n,t,r,i){return{$:5,l:[e,n,t,r,i],m:function(){return d(e,n,t,r,i)},k:void 0}}),N(function(e,n,t,r,i,o){return{$:5,l:[e,n,t,r,i,o],m:function(){return l(e,n,t,r,i,o)},k:void 0}}),W(function(e,n,t,r,i,o,a){return{$:5,l:[e,n,t,r,i,o,a],m:function(){return B(e,n,t,r,i,o,a)},k:void 0}}),z(function(e,n,t,r,i,o,a,s){return{$:5,l:[e,n,t,r,i,o,a,s],m:function(){return function(e,n,t,r,i,o,a,s){return 7===e.a?e.f(n,t,r,i,o,a,s):e(n)(t)(r)(i)(o)(a)(s)}(e,n,t,r,i,o,a,s)},k:void 0}}),G(function(e,n,t,r,i,o,a,s,u){return{$:5,l:[e,n,t,r,i,o,a,s,u],m:function(){return function(e,n,t,r,i,o,a,s,u){return 8===e.a?e.f(n,t,r,i,o,a,s,u):e(n)(t)(r)(i)(o)(a)(s)(u)}(e,n,t,r,i,o,a,s,u)},k:void 0}});var Ie=s(function(e,n){return{$:"a0",n:e,o:n}}),Fe=s(function(e,n){return{$:"a1",n:e,o:n}}),Ne=s(function(e,n){return{$:"a2",n:e,o:n}}),We=s(function(e,n){return{$:"a3",n:e,o:n}});n(function(e,n,t){return{$:"a4",n:n,o:{f:e,o:t}}});s(function(e,n){return"a0"===n.$?f(Ie,n.n,function(e,n){var t=dt(n);return{$:n.$,a:t?h(ft,t<3?Ge:Be,ht(e),n.a):f(ct,e,n.a)}}(e,n.o)):n});var ze,Ge=s(function(e,n){return{a:e(n.a),b:n.b}}),Be=s(function(e,n){return{G:e(n.G),bk:n.bk,bc:n.bc}});function Me(e){for(var n={};e.b;e=e.b){var t,r=e.a,i=r.$,o=r.n,r=r.o;"a2"===i?"className"===o?Re(n,o,r):n[o]=r:(t=n[i]||(n[i]={}),"a3"===i&&"class"===o?Re(t,o,r):t[o]=r)}return n}function Re(e,n,t){var r=e[n];e[n]=r?r+" "+t:t}function w(e,n){var t=e.$;if(5===t)return w(e.k||(e.k=e.m()),n);if(0===t)return c.createTextNode(e.a);if(4===t){for(var r=e.k,i=e.j;4===r.$;)"object"!=typeof i?i=[i,r.j]:i.push(r.j),r=r.k;var o={j:i,p:n};(a=w(r,o)).elm_event_node_ref=o}else if(3===t)He(a=e.h(e.g),n,e.d);else{var a=e.f?c.createElementNS(e.f,e.c):c.createElement(e.c);Oe&&"a"==e.c&&a.addEventListener("click",Oe(a)),He(a,n,e.d);for(var s=e.e,u=0;u<s.length;u++)a.appendChild(w(1===t?s[u]:s[u].b,n))}return a}function He(e,n,t){for(var r in t){var i=t[r];"a1"===r?function(e,n){var t,r=e.style;for(t in n)r[t]=n[t]}(e,i):"a0"===r?function(e,n,t){var r,i=e.elmFs||(e.elmFs={});for(r in t){var o=t[r],a=i[r];if(o){if(a){if(a.q.$===o.$){a.q=o;continue}e.removeEventListener(r,a)}a=function(u,e){function l(e){var n=l.q,t=m(n.a,e);if(A(t)){for(var r,n=dt(n),t=t.a,i=n?n<3?t.a:t.G:t,o=1==n?t.b:3==n&&t.bk,a=(o&&e.stopPropagation(),(2==n?t.b:3==n&&t.bc)&&e.preventDefault(),u);r=a.j;){if("function"==typeof r)i=r(i);else for(var s=r.length;s--;)i=r[s](i);a=a.p}a(i,o)}}return l.q=e,l}(n,o),e.addEventListener(r,a,ze&&{passive:dt(o)<2}),i[r]=a}else e.removeEventListener(r,a),i[r]=void 0}}(e,n,i):"a3"===r?function(e,n){for(var t in n){var r=n[t];void 0!==r?e.setAttribute(t,r):e.removeAttribute(t)}}(e,i):"a4"===r?function(e,n){for(var t in n){var r=n[t],i=r.f,r=r.o;void 0!==r?e.setAttributeNS(i,t,r):e.removeAttributeNS(i,t)}}(e,i):("value"!==r&&"checked"!==r||e[r]!==i)&&(e[r]=i)}}try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){ze=!0}}))}catch(e){}function De(e,n){var t=[];return C(e,n,t,0),t}function T(e,n,t,r){n={$:n,r:t,s:r,t:void 0,u:void 0};return e.push(n),n}function C(e,n,t,r){if(e!==n){var i=e.$,o=n.$;if(i!==o){if(1!==i||2!==o)return void T(t,0,r,n);n=function(e){for(var n=e.e,t=n.length,r=Array(t),i=0;i<t;i++)r[i]=n[i].b;return{$:1,c:e.c,d:e.d,e:r,f:e.f,b:e.b}}(n),o=1}switch(o){case 5:for(var a=e.l,s=n.l,u=a.length,l=u===s.length;l&&u--;)l=a[u]===s[u];if(l)return void(n.k=e.k);n.k=n.m();var c=[];return C(e.k,n.k,c,0),void(0<c.length&&T(t,1,r,c));case 4:for(var f=e.j,h=n.j,d=!1,p=e.k;4===p.$;)d=!0,"object"!=typeof f?f=[f,p.j]:f.push(p.j),p=p.k;for(var g=n.k;4===g.$;)d=!0,"object"!=typeof h?h=[h,g.j]:h.push(g.j),g=g.k;return d&&f.length!==h.length?void T(t,0,r,n):((d?function(e,n){for(var t=0;t<e.length;t++)if(e[t]!==n[t])return;return 1}(f,h):f===h)||T(t,2,r,h),void C(p,g,t,r+1));case 0:return void(e.a!==n.a&&T(t,3,r,n.a));case 1:return void Je(e,n,t,r,Ye);case 2:return void Je(e,n,t,r,Ke);case 3:if(e.h!==n.h)return void T(t,0,r,n);c=Ve(e.d,n.d),c=(c&&T(t,4,r,c),n.i(e.g,n.g));c&&T(t,5,r,c)}}}function Je(e,n,t,r,i){var o;e.c!==n.c||e.f!==n.f?T(t,0,r,n):((o=Ve(e.d,n.d))&&T(t,4,r,o),i(e,n,t,r))}function Ve(e,n,t){var r,i,o,a,s;for(i in e)"a1"===i||"a0"===i||"a3"===i||"a4"===i?(o=Ve(e[i],n[i]||{},i))&&((r=r||{})[i]=o):i in n?(o=e[i])===(a=n[i])&&"value"!==i&&"checked"!==i||"a0"===t&&function(e,n){return e.$==n.$&&u(e.a,n.a)}(o,a)||((r=r||{})[i]=a):(r=r||{})[i]=t?"a1"===t?"":"a0"===t||"a3"===t?void 0:{f:e[i].f,o:void 0}:"string"==typeof e[i]?"":null;for(s in n)s in e||((r=r||{})[s]=n[s]);return r}function Ye(e,n,t,r){var i=e.e,o=n.e,e=i.length,n=o.length;n<e?T(t,6,r,{v:n,i:e-n}):e<n&&T(t,7,r,{v:e,e:o});for(var a=e<n?e:n,s=0;s<a;s++){var u=i[s];C(u,o[s],t,++r),r+=u.b||0}}function Ke(e,n,t,r){for(var i=[],o={},a=[],s=e.e,u=n.e,l=s.length,c=u.length,f=0,h=0,d=r;f<l&&h<c;){var p=s[f],g=u[h],b=p.a,m=g.a,v=p.b,y=g.b,w=void 0,k=void 0;if(b===m)C(v,y,i,++d),d+=v.b||0,f++,h++;else{var $,x,j,_,S=s[f+1],A=u[h+1];if(S&&(x=S.b,k=m===($=S.a)),A&&(_=A.b,w=b===(j=A.a)),w&&k)C(v,_,i,++d),Qe(o,i,b,y,h,a),d+=v.b||0,Xe(o,i,b,x,++d),d+=x.b||0,f+=2,h+=2;else if(w)d++,Qe(o,i,m,y,h,a),C(v,_,i,d),d+=v.b||0,f+=1,h+=2;else if(k)Xe(o,i,b,v,++d),d+=v.b||0,C(x,y,i,++d),d+=x.b||0,f+=2,h+=1;else{if(!S||$!==j)break;Xe(o,i,b,v,++d),Qe(o,i,m,y,h,a),d+=v.b||0,C(x,_,i,++d),d+=x.b||0,f+=2,h+=2}}}for(;f<l;){v=(p=s[f]).b;Xe(o,i,p.a,v,++d),d+=v.b||0,f++}for(;h<c;){var P=P||[];Qe(o,i,(g=u[h]).a,g.b,void 0,P),h++}(0<i.length||0<a.length||P)&&T(t,8,r,{w:i,x:a,y:P})}var Ue="_elmW6BL";function Qe(e,n,t,r,i,o){var a,s=e[t];s?1===s.c?(o.push({r:i,A:s}),s.c=2,C(s.z,r,a=[],s.r),s.r=i,s.s.s={w:a,A:s}):Qe(e,n,t+Ue,r,i,o):(o.push({r:i,A:s={c:0,z:r,r:i,s:void 0}}),e[t]=s)}function Xe(e,n,t,r,i){var o,a=e[t];a?0===a.c?(a.c=2,C(r,a.z,o=[],i),T(n,9,i,{w:o,A:a})):Xe(e,n,t+Ue,r,i):(o=T(n,9,i,void 0),e[t]={c:1,z:r,r:i,s:o})}function Ze(e,n,t,r){!function e(n,t,r,i,o,a,s){var u=r[i];var l=u.r;for(;l===o;){var c,f=u.$;if(1===f?Ze(n,t.k,u.s,s):8===f?(u.t=n,u.u=s,0<(c=u.s.w).length&&e(n,t,c,0,o,a,s)):9===f?(u.t=n,u.u=s,(f=u.s)&&(f.A.s=n,0<(c=f.w).length)&&e(n,t,c,0,o,a,s)):(u.t=n,u.u=s),!(u=r[++i])||(l=u.r)>a)return i}var h=t.$;if(4===h){for(var d=t.k;4===d.$;)d=d.k;return e(n,d,r,i,o+1,a,n.elm_event_node_ref)}var p=t.e;var g=n.childNodes;for(var b=0;b<p.length;b++){var m=1===h?p[b]:p[b].b,v=++o+(m.b||0);if(o<=l&&l<=v&&(i=e(g[b],m,r,i,o,v,s),!(u=r[i])||(l=u.r)>a))return i;o=v}return i}(e,n,t,0,0,n.b,r)}function en(e,n,t,r){return 0===t.length?e:(Ze(e,n,t,r),nn(e,t))}function nn(e,n){for(var t=0;t<n.length;t++){var r=n[t],i=r.t,r=function(e,n){switch(n.$){case 0:return function(e,n,t){var r=e.parentNode,n=w(n,t);n.elm_event_node_ref||(n.elm_event_node_ref=e.elm_event_node_ref);r&&n!==e&&r.replaceChild(n,e);return n}(e,n.s,n.u);case 4:return He(e,n.u,n.s),e;case 3:return e.replaceData(0,e.length,n.s),e;case 1:return nn(e,n.s);case 2:return e.elm_event_node_ref?e.elm_event_node_ref.j=n.s:e.elm_event_node_ref={j:n.s,p:n.u},e;case 6:for(var t=n.s,r=0;r<t.i;r++)e.removeChild(e.childNodes[t.v]);return e;case 7:for(var i=(t=n.s).e,r=t.v,o=e.childNodes[r];r<i.length;r++)e.insertBefore(w(i[r],n.u),o);return e;case 9:var a;return(t=n.s)?(void 0!==(a=t.A).r&&e.parentNode.removeChild(e),a.s=nn(e,t.w)):e.parentNode.removeChild(e),e;case 8:return function(e,n){for(var t=n.s,r=function(e,n){if(e){for(var t=c.createDocumentFragment(),r=0;r<e.length;r++){var i=e[r].A;t.appendChild(2===i.c?i.s:w(i.z,n.u))}return t}}(t.y,n),i=(e=nn(e,t.w),t.x),o=0;o<i.length;o++){var a=i[o],s=a.A,s=2===s.c?s.s:w(s.z,n.u);e.insertBefore(s,e.childNodes[a.r])}r&&e.appendChild(r);return e}(e,n);case 5:return n.s(e);default:p(10)}}(i,r);i===e&&(e=r)}return e}function tn(e){if(3===e.nodeType)return{$:0,a:e.textContent};if(1!==e.nodeType)return{$:0,a:""};for(var n=g,t=e.attributes,r=t.length;r--;)var i=t[r],n={$:1,a:f(We,i.name,i.value),b:n};for(var o=e.tagName.toLowerCase(),a=g,s=e.childNodes,r=s.length;r--;)a={$:1,a:tn(s[r]),b:a};return h(qe,o,n,a)}var rn=n(function(e,n,t){return function(e,n,t,r){return{$:3,d:Me(e),g:n,h:t,i:r}}(n,{a:e,b:t},on,an)});function on(e){return f(ln,e,c.createElement("div"))}function an(e,n){return(e.b!==n.b||e.a!==n.a)&&ln(n)}var sn,un,ln=s(function(e,n){var t;return n.innerHTML=cn(e.b,{highlight:function(e,n){return!n&&mt(t.dj)&&(n=t.dj.a),"undefined"!=typeof hljs&&n&&~hljs.listLanguages().indexOf(n)?hljs.highlight(n,e,!0).value:e},gfm:e=(t=e.a).dr.a,tables:e&&e.ei,breaks:e&&e.c7,sanitize:t.dY,smartypants:t.d5}),n}),cn=(un=(sn={}).exports={},function(){var c={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:n,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:n,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:n,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function u(e){this.tokens=[],this.tokens.links={},this.options=e||d.defaults,this.rules=c.normal,this.options.gfm&&(this.rules=this.options.tables?c.tables:c.gfm)}c.bullet=/(?:[*+-]|\d+\.)/,c.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,c.item=e(c.item,"gm")(/bull/g,c.bullet)(),c.list=e(c.list)(/bull/g,c.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+c.def.source+")")(),c.blockquote=e(c.blockquote)("def",c.def)(),c._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",c.html=e(c.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,c._tag)(),c.paragraph=e(c.paragraph)("hr",c.hr)("heading",c.heading)("lheading",c.lheading)("blockquote",c.blockquote)("tag","<"+c._tag)("def",c.def)(),c.normal=h({},c),c.gfm=h({},c.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),c.gfm.paragraph=e(c.paragraph)("(?!","(?!"+c.gfm.fences.source.replace("\\1","\\2")+"|"+c.list.source.replace("\\1","\\3")+"|")(),c.tables=h({},c.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),u.rules=c,u.lex=function(e,n){return new u(n).lex(e)},u.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},u.prototype.token=function(e,n,t){for(var r,i,o,a,s,u,l,e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),1<i[0].length)&&this.tokens.push({type:"space"}),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(n&&(i=this.rules.nptable.exec(e))){for(e=e.substring(i[0].length),a={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},u=0;u<a.align.length;u++)a.align[u]=/^ *-+: *$/.test(a.align[u])?"right":/^ *:-+: *$/.test(a.align[u])?"center":/^ *:-+ *$/.test(a.align[u])?"left":null;for(u=0;u<a.cells.length;u++)a.cells[u]=a.cells[u].split(/ *\| */);this.tokens.push(a)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,n,!0),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),this.tokens.push({type:"list_start",ordered:1<(o=i[2]).length}),r=!1,l=(i=i[0].match(this.rules.item)).length,u=0;u<l;u++)s=(a=i[u]).length,~(a=a.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(s-=a.length,a=a.replace(this.options.pedantic?/^ {1,4}/gm:RegExp("^ {1,"+s+"}","gm"),"")),!this.options.smartLists||u===l-1||o===(s=c.bullet.exec(i[u+1])[0])||1<o.length&&1<s.length||(e=i.slice(u+1).join("\n")+e,u=l-1),s=r||/\n\n(?!\s*$)/.test(a),u!==l-1&&(r="\n"==(a[0|a.length-1]||""),s=s||r),this.tokens.push({type:s?"loose_item_start":"list_item_start"}),this.token(a,!1,t),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:i[0]});else if(!t&&n&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(n&&(i=this.rules.table.exec(e))){for(e=e.substring(i[0].length),a={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;u<a.align.length;u++)a.align[u]=/^ *-+: *$/.test(a.align[u])?"right":/^ *:-+: *$/.test(a.align[u])?"center":/^ *:-+ *$/.test(a.align[u])?"left":null;for(u=0;u<a.cells.length;u++)a.cells[u]=a.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a)}else if(n&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"==(i[1][0|i[1].length-1]||"")?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var t={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:n,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^_\_([\s\S]+?)_\_(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|_\_)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:n,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};function r(e,n){if(this.options=n||d.defaults,this.links=e,this.rules=t.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?t.breaks:t.gfm:this.options.pedantic&&(this.rules=t.pedantic)}function i(e){this.options=e||{}}function l(e){this.tokens=[],this.token=null,this.options=e||d.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function f(e,n){return e.replace(n?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function e(r,i){return r=r.source,i=i||"",function e(n,t){return n?(t=(t=t.source||t).replace(/(^|[^\[])\^/g,"$1"),r=r.replace(n,t),e):RegExp(r,i)}}function n(){}function h(e){for(var n,t,r=1;r<arguments.length;r++)for(t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}function d(e,t,r){if(r||"function"==typeof t){r||(r=t,t=null);var i,o=(t=h({},d.defaults,t||{})).highlight,n=0;try{i=u.lex(e,t)}catch(e){return r(e)}var a=i.length,s=function(n){if(n)return t.highlight=o,r(n);var e;try{e=l.parse(i,t)}catch(e){n=e}return t.highlight=o,n?r(n):r(null,e)};if(!o||o.length<3)return s();if(delete t.highlight,!a)return s();for(;n<i.length;n++)!function(t){"code"!==t.type?--a||s():o(t.text,t.lang,function(e,n){return e?s(e):null==n||n===t.text?--a||s():(t.text=n,t.escaped=!0,void(--a||s()))})}(i[n])}else try{return t=t&&h({},d.defaults,t),l.parse(u.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/chjj/marked.",(t||d.defaults).silent)return"<p>An error occured:</p><pre>"+f(e.message+"",!0)+"</pre>";throw e}}t._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,t._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,t.link=e(t.link)("inside",t._inside)("href",t._href)(),t.reflink=e(t.reflink)("inside",t._inside)(),t.normal=h({},t),t.pedantic=h({},t.normal,{strong:/^_\_(?=\S)([\s\S]*?\S)_\_(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),t.gfm=h({},t.normal,{escape:e(t.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:e(t.text)("]|","~]|")("|","|https?://|")()}),t.breaks=h({},t.gfm,{br:e(t.br)("{2,}","*")(),text:e(t.gfm.text)("{2,}","*")()}),r.rules=t,r.output=function(e,n,t){return new r(n,t).output(e)},r.prototype.output=function(e){for(var n,t,r,i,o="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),o+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),r="@"===i[2]?(t=this.mangle(":"==(i[1][6]||"")?i[1].substring(7):i[1]),this.mangle("mailto:")+t):t=f(i[1]),o+=this.renderer.link(r,null,t);else if(!this.inLink&&(i=this.rules.url.exec(e)))e=e.substring(i[0].length),r=t=f(i[1]),o+=this.renderer.link(r,null,t);else if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):f(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,o+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if(i=(i=this.rules.reflink.exec(e))||this.rules.nolink.exec(e))e=e.substring(i[0].length),n=(i[2]||i[1]).replace(/\s+/g," "),(n=this.links[n.toLowerCase()])&&n.href?(this.inLink=!0,o+=this.outputLink(i,n),this.inLink=!1):(o+=i[0][0]||"",e=i[0].substring(1)+e);else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),o+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),o+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),o+=this.renderer.codespan(f(i[2],!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),o+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),o+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),o+=this.renderer.text(f(this.smartypants(i[0])));else if(e)throw Error("Infinite loop on byte: "+e.charCodeAt(0));return o},r.prototype.outputLink=function(e,n){var t=f(n.href),n=n.title?f(n.title):null;return"!"!=(e[0][0]||"")?this.renderer.link(t,n,this.output(e[1])):this.renderer.image(t,n,f(e[1]))},r.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},r.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var n,t="",r=e.length,i=0;i<r;i++)n=e.charCodeAt(i),t+="&#"+(n=.5<Math.random()?"x"+n.toString(16):n)+";";return t},i.prototype.code=function(e,n,t){var r;return this.options.highlight&&null!=(r=this.options.highlight(e,n))&&r!==e&&(t=!0,e=r),n?'<pre><code class="'+this.options.langPrefix+f(n,!0)+'">'+(t?e:f(e,!0))+"\n</code></pre>\n":"<pre><code>"+(t?e:f(e,!0))+"\n</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,n,t){return"<h"+n+' id="'+this.options.headerPrefix+t.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+n+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,n){n=n?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,n){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+n+"</tbody>\n</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,n){var t=n.header?"th":"td";return(n.align?"<"+t+' style="text-align:'+n.align+'">':"<"+t+">")+e+"</"+t+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,n,t){if(this.options.sanitize){try{var r=decodeURIComponent(e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(e,n){return"colon"===(n=n.toLowerCase())?":":"#"==(n[0]||"")?String.fromCharCode("x"==(n[1]||"")?parseInt(n.substring(2),16):+n.substring(1)):""})).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(!r.indexOf("javascript:")||!r.indexOf("vbscript:")||!r.indexOf("data:"))return""}r='<a href="'+e+'"';return n&&(r+=' title="'+n+'"'),r+=">"+t+"</a>"},i.prototype.image=function(e,n,t){e='<img src="'+e+'" alt="'+t+'"';return n&&(e+=' title="'+n+'"'),e+=this.options.xhtml?"/>":">"},i.prototype.text=function(e){return e},l.parse=function(e,n,t){return new l(n).parse(e)},l.prototype.parse=function(e){this.inline=new r(e.links,this.options),this.tokens=e.reverse();for(var n="";this.next();)n+=this.tok();return n},l.prototype.next=function(){return this.token=this.tokens.pop()},l.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},l.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},l.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":for(var e,n,t="",r="",i="",o=0;o<this.token.header.length;o++)i+=this.renderer.tablecell(this.inline.output(this.token.header[o]),{header:!0,align:this.token.align[o]});for(t+=this.renderer.tablerow(i),o=0;o<this.token.cells.length;o++){for(e=this.token.cells[o],i="",n=0;n<e.length;n++)i+=this.renderer.tablecell(this.inline.output(e[n]),{header:!1,align:this.token.align[n]});r+=this.renderer.tablerow(i)}return this.renderer.table(t,r);case"blockquote_start":for(r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":for(var r="",t=this.token.ordered;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,t);case"list_item_start":for(r="";"list_item_end"!==this.next().type;)r+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(r);case"loose_item_start":for(r="";"list_item_end"!==this.next().type;)r+=this.tok();return this.renderer.listitem(r);case"html":t=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(t);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},n.exec=n,d.options=d.setOptions=function(e){return h(d.defaults,e),d},d.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},d.Parser=l,d.parser=l.parse,d.Renderer=i,d.Lexer=u,d.lexer=u.lex,d.InlineLexer=r,d.inlineLexer=r.output,d.parse=d,void 0!==sn&&"object"==typeof un?sn.exports=d:"function"==typeof define&&define.amd?define(function(){return d}):this.marked=d}.call(function(){return this||("undefined"!=typeof window?window:global)}()),sn.exports);t(function(n,e,t,a){return Se(e,a,n.dz,n.eC,n.eh,function(t,e){var r=n.eD,i=a.node,o=tn(i);return dn(e,function(e){var e=r(e),n=De(o,e);i=en(i,o,n,t),o=e})})});var fn=t(function(n,e,t,r){return Se(e,r,n.dz,n.eC,n.eh,function(r,e){var i=n.bg&&n.bg(r),o=n.eD,a=c.title,s=c.body,u=tn(s);return dn(e,function(e){Oe=i;var e=o(e),n=qe("body")(g)(e.c$),t=De(u,n);s=en(s,u,t,r),u=n,Oe=0,a!==e.ey&&(c.title=a=e.ey)})})}),hn="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(e){return setTimeout(e,1e3/60)};function dn(t,r){r(t);var i=0;function o(){i=1===i?0:(hn(o),r(t),1)}return function(e,n){t=e,n?(r(t),2===i&&(i=1)):(0===i&&hn(o),i=2)}}s(function(e,n){return f(Kt,Wt,{$:2,b:function(){n&&history.go(n),e()},c:null})}),s(function(e,n){return f(Kt,Wt,{$:2,b:function(){history.pushState({},"",n),e()},c:null})}),s(function(e,n){return f(Kt,Wt,{$:2,b:function(){history.replaceState({},"",n),e()},c:null})});var pn={addEventListener:function(){},removeEventListener:function(){}},gn="undefined"!=typeof window?window:pn;n(function(t,r,i){return we({$:2,b:function(e){function n(e){ye(i(e))}return t.addEventListener(r,n,ze&&{passive:!0}),function(){t.removeEventListener(r,n)}},c:null})}),s(function(e,n){e=m(e,n);return A(e)?x(e.a):j});function bn(t,r){return{$:2,b:function(n){hn(function(){var e=document.getElementById(t);n(e?{$:0,a:r(e)}:{$:1,a:St(t)})})},c:null}}s(function(n,e){return bn(e,function(e){return e[n](),i})});s(function(e,n){return t=function(){return gn.scroll(e,n),i},{$:2,b:function(e){hn(function(){e({$:0,a:t()})})},c:null};var t});n(function(e,n,t){return bn(e,function(e){return e.scrollLeft=n,e.scrollTop=t,i})});function mn(e){return f(Fn,"\n    ",f(Nn,"\n",e))}function vn(e){return h(Wn,s(function(e,n){return n+1}),0,e)}function yn(e){return 97<=(e=Rn(e))&&e<=122}function wn(e){return(e=Rn(e))<=90&&65<=e}function kn(e){return yn(e)||wn(e)||function(e){e=Rn(e);return e<=57&&48<=e}(e)}function o(e){return f(gt,"href",/^javascript:/i.test((e=e).replace(/\s/g,""))?"":e)}function $n(e){return e}var k=K,xn=H,jn=(n(function(t,e,n){var r=n.c,n=n.d,i=s(function(e,n){return h(xn,e.$?t:i,n,e.a)});return h(xn,i,h(xn,t,e,n),r)}),n(function(e,n,t){for(;;){if(-2===t.$)return n;var r=t.d,i=e,o=h(e,t.b,t.c,h(jn,e,n,t.e));e=i,n=o,t=r}})),_n=function(e){return h(jn,n(function(e,n,t){return f(k,{a:e,b:n},t)}),g,e)},Sn=1,An=2,Pn=0,pn=n(function(e,n,t){return{bA:t,cb:n,bq:e}}),$=function(e){return{$:1,a:e}},Tn=s(function(e,n){return{$:3,a:e,b:n}}),Cn=s(function(e,n){return{$:0,a:e,b:n}}),En=s(function(e,n){return{$:1,a:e,b:n}}),On=function(e){return{$:0,a:e}},Ln=function(e){return{$:2,a:e}},x=function(e){return{$:0,a:e}},j={$:1},qn=ie,In=pe,_=function(e){return e+""},Fn=s(function(e,n){return f(te,e,U(n))}),Nn=s(function(e,n){return b(f(ne,e,n))}),Wn=n(function(e,n,t){for(;;){if(!t.b)return n;var r=t.b,i=e,o=f(e,t.a,n);e=i,n=o,t=r}}),zn=Q,Gn=n(function(e,n,t){for(;;){if(1<=a(e,n))return t;var r=e,i=n-1,o=f(k,n,t);e=r,n=i,t=o}}),Bn=s(function(e,n){return h(Gn,e,n,g)}),Mn=s(function(e,n){return h(zn,e,f(Bn,0,vn(n)-1),n)}),Rn=function(e){var n=e.charCodeAt(0);return n<55296||56319<n?n:1024*(n-55296)+e.charCodeAt(1)-56320+65536},S=function(e){return h(Wn,k,g,e)},Hn=function(e){var n=e.charCodeAt(0);return n?x(n<55296||56319<n?{a:e[0],b:e.slice(1)}:{a:e[0]+e[1],b:e.slice(2)}):j},Dn=s(function(e,n){return"\n\n("+_(e+1)+(") "+mn(Jn(n)))}),Jn=function(e){return f(Vn,e,g)},Vn=s(function(e,n){for(;;)switch(e.$){case 0:var t=e.a,r=e.b,i=(i=o=void 0,1!==(i=Hn(t)).$&&(o=(i=i.a).b,function(e){return yn(e)||wn(e)}(i.a))&&f(qn,kn,o)),o=r,i=f(k,i?"."+t:"['"+t+"']",n);e=o,n=i;continue;case 1:var r=e.b,t="["+_(e.a)+"]",o=r,i=f(k,t,n);e=o,n=i;continue;case 2:var a=e.a;if(a.b){if(a.b.b)return s=(n.b?"The Json.Decode.oneOf at json"+f(Fn,"",S(n)):"Json.Decode.oneOf")+" failed in the following "+_(vn(a))+" ways:",f(Fn,"\n\n",f(k,s,f(Mn,Dn,a)));e=o=r=a.a,n=i=n;continue}return"Ran into a Json.Decode.oneOf with no possibilities"+(n.b?" at json"+f(Fn,"",S(n)):"!");default:var s,a=e.a,u=e.b;return(s=n.b?"Problem with the value at json"+f(Fn,"",S(n))+":\n\n    ":"Problem with the given value:\n\n")+(mn(f(In,4,u))+"\n\n")+a}var o,i}),Yn=t(function(e,n,t,r){return{$:0,a:e,b:n,c:t,d:r}}),Kn=[],Un=X,Qn=s(function(e,n){return ee(n)/ee(e)}),Xn=Un(f(Qn,2,32)),Zn=d(Yn,0,Xn,Kn,Kn),et=M,nt=(s(function(e,n){return e(n)}),s(function(e,n){return n(e)}),Z),tt=function(e){return e.length},rt=s(function(e,n){return 0<a(e,n)?e:n}),it=R,ot=s(function(e,n){for(;;){var t=f(it,32,e),r=t.b,t=f(k,{$:0,a:t.a},n);if(!r.b)return S(t);e=r,n=t}}),at=s(function(e,n){for(;;){var t=Un(n/32);if(1===t)return f(it,32,e).a;e=f(ot,e,g),n=t}}),st=s(function(e,n){var t,r;return n.c?(r=nt(f(Qn,32,(t=32*n.c)-1)),e=e?S(n.g):n.g,e=f(at,e,n.c),d(Yn,tt(n.f)+t,f(rt,5,r*Xn),e,n.f)):d(Yn,tt(n.f),Xn,Kn,n.f)}),ut=r(function(e,n,t,r,i){for(;;){if(n<0)return f(st,!1,{g:r,c:t/32|0,f:i});var o={$:1,a:h(et,32,n,e)};e=e,n=n-32,t=t,r=f(k,o,r),i=i}}),lt=s(function(e,n){var t,r;return 0<e?(r=h(et,t=e%32,e-t,n),l(ut,n,e-t-32,e,g,r)):Zn}),A=function(e){return!e.$},ct=se,ft=ue,ht=function(e){return{$:0,a:e}},dt=function(e){switch(e.$){case 0:return 0;case 1:return 1;case 2:return 2;default:return 3}},pt=ge,gt=s(function(e,n){return f(Ne,e,pt(n))}),P=gt("className"),E=qe("div"),bt={dj:j,dr:x({c7:!1,ei:!1}),dY:!1,d5:!1},O=Fe,mt=function(e){return!e.$},vt=rn,K=s(function(e,n){return f(E,f(k,P("content"),function(e){return b([f(O,"display","block"),f(O,"max-width",e),f(O,"margin","0 auto")])}(e)),b([h(vt,bt,g,n)]))}),L=qe("a"),yt=V,wt=s(function(e,n){for(;;){if(-2===n.$)return j;var t=n.c,r=n.d,i=n.e;switch(f(yt,e,n.b)){case 0:e=e,n=r;continue;case 1:return x(t);default:e=e,n=i;continue}}}),kt={$:-2},H=kt,q=r(function(e,n,t,r,i){return{$:-1,a:e,b:n,c:t,d:r,e:i}}),$t=r(function(e,n,t,r,i){var o,a,s,u;return-1!==i.$||i.a?-1!==r.$||r.a||-1!==r.d.$||r.d.a?l(q,e,n,t,r,i):(o=r.d,u=r.e,l(q,0,r.b,r.c,l(q,1,o.b,o.c,o.d,o.e),l(q,1,n,t,u,i))):(o=i.b,a=i.c,s=i.d,i=i.e,-1!==r.$||r.a?l(q,e,o,a,l(q,0,n,t,r,s),i):l(q,0,n,t,l(q,1,r.b,r.c,r.d,u=r.e),l(q,1,o,a,s,i)))}),xt=n(function(e,n,t){if(-2===t.$)return l(q,0,e,n,kt,kt);var r=t.a,i=t.b,o=t.c,a=t.d,s=t.e;switch(f(yt,e,i)){case 0:return l($t,r,i,o,h(xt,e,n,a),s);case 1:return l(q,r,i,n,a,s);default:return l($t,r,i,o,a,h(xt,e,n,s))}}),jt=n(function(e,n,t){e=h(xt,e,n,t);return-1!==e.$||e.a?e:l(q,1,e.b,e.c,e.d,e.e)}),_t=(ie=b([{a:1,b:"Jan"},{a:2,b:"Feb"},{a:3,b:"Mar"},{a:4,b:"Apr"},{a:5,b:"May"},{a:6,b:"June"},{a:7,b:"July"},{a:8,b:"Aug"},{a:9,b:"Sep"},{a:10,b:"Oct"},{a:11,b:"Nov"},{a:12,b:"Dec"}]),h(Wn,s(function(e,n){return h(jt,e.a,e.b,n)}),H,ie)),St=$n,At=N(function(e,n,t,r,i,o){return{bF:o,bM:n,ci:r,ck:t,cn:e,co:i}}),Pt=oe,Tt=function(e){return e.length},Ct=re,Et=s(function(e,n){return e<1?n:h(Ct,e,Tt(n),n)}),Ot=ae,Lt=s(function(e,n){return e<1?"":h(Ct,0,e,n)}),qt=function(e){for(var n=0,t=e.charCodeAt(0),r=43==t||45==t?1:0,i=r;i<e.length;++i){var o=e.charCodeAt(i);if(o<48||57<o)return j;n=10*n+o-48}return i==r?j:x(45==t?-n:n)},It=r(function(e,n,t,r,i){var o,a;return""===i||f(Pt,"@",i)?j:(o=f(Ot,":",i)).b?o.b.b||1===(a=qt(f(Et,(o=o.a)+1,i))).$?j:(a=a,x(B(At,e,f(Lt,o,i),a,n,t,r))):x(B(At,e,i,j,n,t,r))}),Ft=t(function(e,n,t,r){var i;return""===r?j:(i=f(Ot,"/",r)).b?l(It,e,f(Et,i=i.a,r),n,t,f(Lt,i,r)):l(It,e,"/",n,t,r)}),Nt=n(function(e,n,t){var r;return""===t?j:(r=f(Ot,"?",t)).b?d(Ft,e,x(f(Et,(r=r.a)+1,t)),n,f(Lt,r,t)):d(Ft,e,j,n,t)}),Wt=(s(function(e,n){var t;return""===n?j:(t=f(Ot,"#",n)).b?h(Nt,e,x(f(Et,(t=t.a)+1,n)),f(Lt,t,n)):h(Nt,e,j,n)}),function(e){for(;;)0}),zt=be,pe=zt(0),Gt=t(function(e,n,t,r){var i,o,a,s;return r.b?(i=r.a,(r=r.b).b?(o=r.a,(r=r.b).b?(a=r.a,(r=r.b).b?(s=r.b,f(e,i,f(e,o,f(e,a,f(e,r.a,500<t?h(Wn,e,n,S(s)):d(Gt,e,n,t+1,s)))))):f(e,i,f(e,o,f(e,a,n)))):f(e,i,f(e,o,n))):f(e,i,n)):n}),Bt=n(function(e,n,t){return d(Gt,e,n,0,t)}),Mt=s(function(t,e){return h(Bt,s(function(e,n){return f(k,t(e),n)}),g,e)}),Rt=me,Ht=s(function(n,e){return f(Rt,function(e){return zt(n(e))},e)}),Dt=n(function(t,e,r){return f(Rt,function(n){return f(Rt,function(e){return zt(f(t,n,e))},r)},e)}),Jt=Ae,Vt=s(function(e,n){return we(f(Rt,Jt(e),n))}),Q=n(function(e,n,t){return f(Ht,function(e){return 0},(e=f(Mt,Vt(e),n),h(Bt,Dt(k),zt(g),e)))}),X=n(function(e,n,t){return zt(0)}),M=s(function(e,n){return f(Ht,e,n)}),Yt=(y.Task={b:pe,c:Q,d:X,e:M,f:void 0},Pe("Task")),Kt=s(function(e,n){return Yt(f(Ht,e,n))}),Ut=fn,I=Le,Qt=f(E,b([P("footer")]),b([f(L,b([P("grey-link"),o("https://guide.elm-lang.org/install/elm.html")]),b([I("Install")])),I(" — "),f(L,b([P("grey-link"),o("https://github.com/elm/compiler/")]),b([I("Compiler Source")])),I(" — "),f(L,b([P("grey-link"),o("https://github.com/elm/elm-lang.org/")]),b([I("Site Source")])),I(" — © 2012-2021 Evan Czaplicki")])),Xt=t(function(e,n,t,r){e=D(e,n)?b([f(O,"font-weight","bold")]):g;return f(L,f(k,o(r),e),b([I(t)]))}),Zt=Te(g),er=Te(g),nr=n(function(n,t,r){return Ut({dz:function(e){return{a:0,b:Zt}},eh:function(e){return er},eC:s(function(e,n){return{a:0,b:Zt}}),eD:function(e){return{c$:b([function(e){return f(E,b([P("header")]),b([f(E,b([P("nav")]),b([f(L,b([o("/"),f(O,"color","white"),f(O,"font-size","32px")]),b([I("elm")])),f(E,b([P("tabs")]),b([d(Xt,e,0,"examples","/examples"),d(Xt,e,1,"docs","/docs"),d(Xt,e,2,"community","/community"),d(Xt,e,3,"news","/news")]))]))]))}(t),f(E,b([f(O,"flex","1")]),r),Qt]),ey:n}}})});!function(e){F.Elm?function e(n,t){for(var r in t)r in n?"init"==r?p(6):e(n[r],t[r]):n[r]=t[r]}(F.Elm,e):F.Elm=e}({Main:{init:l(r(function(e,n,t,r,i){return h(nr,e,3,b([f(E,b([f(O,"padding","4em 0 1em"),f(O,"text-align","center")]),b([f(E,b([f(O,"font-size","4em")]),b([I(e)])),f(E,b([f(O,"font-size","1.5em")]),b([I(n)])),f(E,b([P("author")]),b([I("by "),f(L,b([o(t.aT)]),b([I(t.aL)])),I(" / "+function(e){var n=f(wt,e.cb,_t);return 1===n.$?_(e.bq):(n=n.a,_(e.bA)+(" "+n+(" "+_(e.bq))))}(r))]))])),f(E,g,i)]))}),"Making Pong","An intro to games in Elm",{aL:"Evan Czaplicki",aT:"https://twitter.com/evancz"},h(pn,2012,12,14),b([f(K,"600px","\n\nThis post has two major goals:\n\n  1. Get you thinking about [Functional Reactive\n     Programming](/learn/What-is-FRP.elm) (FRP) for games.\n  2. Teach you how to make games with Elm.\n\nIn this post we will be looking into [Pong in Elm](/examples/pong):\na functional game written in Elm, playable in any modern browser.\n\n## Functional Game Design\n\nMaking games is historically a very imperative undertaking, so it has long\nmissed the benefits of purely functional programming. FRP makes it possible\nto program rich user interactions without traditional imperative idioms.\n\nBy the end of this post we will have written Pong without any\nimperative code. No global mutable state, no flipping pixels, no destructive\nupdates. In fact, Elm disallows all of these things at the language level.\nSo good design and safe coding practices are a requirement, not just\nself-enforced suggestions.\n\nImperative programs allow you to reach into objects and data structures\nwhenever you want, so it is not a huge deal if your code is somewhat\ndisorganized. With functional game design, we must be more careful about how\nour programs are structured. In fact in Elm, all games will share the same\nunderlying structure.\n\nThe structure of Elm games breaks into four major parts: modeling inputs,\nmodeling the game, updating the game, and viewing the game. It may be helpful\nto think of it as a functional variation on the Model-View-Controller paradigm.\n\nTo make this more concrete, let's see how Pong needs to be structured:\n\n 1. [**Inputs**](#inputs) &mdash; This is all of the stuff coming in from\n    &ldquo;the world&rdquo;. For Pong, this is keyboard input from users and\n    the passage of time.\n\n 2. [**Model**](#model) &mdash; The model holds all of the information we will\n    need to update the game and render it on screen. For Pong we need to model\n    things like paddles, a ball, scores, and the &ldquo;pong court&rdquo;\n    itself which interacts with the paddles and ball. (It seems that there is\n    no way to refer to a &ldquo;pong court&rdquo; that does not sound silly.)\n\n 3. [**Update**](#update) &mdash; When new inputs come in, we need to update\n    the game. Without updates, this version of Pong would be very very boring!\n    This section defines a number of *step functions* that step the game forward\n    based on our inputs. By separating this from the model and display code,\n    we can change how the game works (how it steps forward) without changing\n    anything else: the underlying model and the display code need not be touched.\n\n 4. [**View**](#view) &mdash; Finally, we need a display function that defines\n    the user&rsquo;s view of the game. This code is completely separate from\n    the game logic, so it can be modified without affecting any other part of\n    the program. We can also define many different views of the same underlying\n    model. In Pong there is not much need for this, but as your model becomes\n    more complex this may be very useful!\n\nIf you would like to make a game or larger application in Elm, use this\nstructure! I provide both [the source code for Pong][src] and [an empty\nskeleton for game creation][skeleton] which can both be a starting point for\nplaying around with your own ideas.\n\n [src]: /examples/pong\n [skeleton]: https://github.com/elm-lang/elm-lang.org/blob/master/frontend/public/examples/Intermediate/GameSkeleton.elm\n\nLet&rsquo;s get into the code!\n\n# Inputs\n\nThis game has two primary inputs: the passage of time and key presses.\nWith the keyboard, we need to keep track of:\n\n  * SPACE &mdash; to pause and unpause the game.\n  * w/s &mdash; whether paddle *one* is moving up or down.\n  * &uarr;/&darr; &mdash; whether paddle *two* is moving up or down.\n\nWe can represent the state of the SPACE key with a boolean value. Up and down\ncan be represented by an integer in { -1, 0, 1 }. So to represent the game\nlike this:\n\n```elm\ntype alias Input =\n    { space : Bool\n    , paddle1 : Int\n    , paddle2 : Int\n    , delta : Time\n    }\n```\n\nFrom here we will actually define these inputs. To keep track of the passage of\ntime, we define `delta` using the `fps` function. The `fps` takes a target\nframes-per-second and gives a sequence of time deltas that gets as close to the\ndesired FPS as possible. If the browser can not keep up, the time deltas will\nslow down gracefully.\n\n```elm\ndelta : Signal Time\ndelta =\n    Signal.map inSeconds (fps 35)\n```\n\nNow we put that together with the [keyboard][] inputs to make a signal representing\nall inputs.\n\n [keyboard]: http://package.elm-lang.org/packages/elm-lang/core/latest/Keyboard\n\n```elm\ninput : Signal Input\ninput =\n    Signal.sampleOn delta <|\n        Signal.map4 Input\n            Keyboard.space\n            (Signal.map .y Keyboard.wasd)\n            (Signal.map .y Keyboard.arrows)\n            delta\n```\n\nNotice that we sample on time deltas so that keyboard events do not\ncause extra updates. We want 35 frames per second, not 35 plus the\nnumber of key presses.\n\n# Model\n\nHere we will define the data structures that will be used throughout the rest\nof the program. This is the foundation of our game, so changes here will likely\ncause changes in both the update and view code.\n\nThese models are a rough specification for your game. They force you to ask:\nWhich features do I want? What information do I need for those features? How\ndo I represent that information? Once you have figured out the core information\nneeded for your game, you have already done a lot of planning about how\neverything else will work. Do not be afraid to spend a lot of time thinking\nabout this!\n\nThe most basic thing we need to model is the &ldquo;pong court&rdquo;. This\njust comes down to the dimensions of the court to know when the ball should\nbounce and where the paddles should stop. We will also define halfway points\nwhich are commonly used.\n\n```elm\n(gameWidth,gameHeight) = (600,400)\n(halfWidth,halfHeight) = (300,200)\n```\n\nNow that we have a court, we need a ball and paddles. We will define these data\nstructures so that they share a lot of structure. Both have a position and\nvelocity, so thanks to [structural typing](/docs/records) in Elm, we can\nshare some code later on.\n\n```elm\ntype alias Object a =\n    { a |\n        x : Float,\n        y : Float,\n        vx : Float,\n        vy : Float\n    }\n\n\ntype alias Ball =\n    Object {}\n\n\ntype alias Player =\n    Object { score : Int }\n```\n\nBoth `Ball` and `Player` have a position and velocity, but notice that a\n`Player` has one extra field for representing the player&rsquo;s score.\n\nWe also want to be able to pause the game between volleys so the user can take\na break. We do this with a [union type](https://guide.elm-lang.org/types/custom_types.html\nwhich we can later extend if we want more game states for speeding up gameplay\nor whatever else.\n\n```elm\ntype State = Play | Pause\n```\n\nWe now have a way to model balls, players, and the game state, so we just need\nto put it together. We define a `Game` that includes all of these things and\nthen create a default game state.\n\n```elm\ntype alias Game =\n    { state : State\n    , ball : Ball\n    , player1 : Player\n    , player2 : Player\n    }\n\n\nplayer : Float -> Player\nplayer x =\n    { x=x, y=0, vx=0, vy=0, score=0 }\n\n\ndefaultGame : Game\ndefaultGame =\n    { state   = Pause\n    , ball    = { x=0, y=0, vx=200, vy=200 }\n    , player1 = player (20-halfWidth)\n    , player2 = player (halfWidth-20)\n    }\n```\n\nThe `defaultGame` is the starting state, so we pause the game, place the ball\nin the middle of the screen, and put the paddles on either side of the court.\n\n# Update\n\nOur `Game` data structure holds all of the information needed to represent the\ngame at any moment. In this section we will define a *step function* that steps\nfrom `Game` to `Game`, moving the game forward as new inputs come in.\n\nTo make our step function more managable, we can break it up into smaller\nfunctions. This next chunk of code defines some not-so-interesting helper\nfunctions: `near` and `within` for detecting collisions and `stepV` for safely\nstepping velocity.\n\n```elm\n-- are n and m near each other?\n-- specifically are they within c of each other?\nnear : Float -> Float -> Float -> Bool\nnear n c m =\n    m >= n-c && m <= n+c\n\n\n-- is the ball within a paddle?\nwithin : Ball -> Player -> Bool\nwithin ball player =\n    near player.x 8 ball.x\n    && near player.y 20 ball.y\n\n\n-- change the direction of a velocity based on collisions\nstepV : Float -> Bool -> Bool -> Float\nstepV v lowerCollision upperCollision =\n  if lowerCollision then\n      abs v\n\n  else if upperCollision then\n      -(abs v)\n\n  else\n      v\n```\n\nOkay, now that we have the boring functions, we can define step functions\nfor balls and paddles. Notice that `stepObj` which uses structural typing to\nshare code between `stepBall` and `stepPlyr`. `stepObj` changes an objects\nposition based on its velocity, so `stepBall` and `stepPlyr` can just focus\non how their velocities change.\n\n```elm\n-- step the position of an object based on its velocity and a timestep\nstepObj : Time -> Object a -> Object a\nstepObj t ({x,y,vx,vy} as obj) =\n    { obj |\n        x = x + vx * t,\n        y = y + vy * t\n    }\n\n\n-- move a ball forward, detecting collisions with either paddle\nstepBall : Time -> Ball -> Player -> Player -> Ball\nstepBall t ({x,y,vx,vy} as ball) player1 player2 =\n  if not (ball.x |> near 0 halfWidth)\n    then { ball | x = 0, y = 0 }\n    else\n      stepObj t\n        { ball |\n            vx =\n              stepV vx (ball `within` player1) (ball `within` player2),\n            vy =\n              stepV vy (y < 7-halfHeight) (y > halfHeight-7)\n        }\n\n\n-- step a player forward, making sure it does not fly off the court\nstepPlyr : Time -> Int -> Int -> Player -> Player\nstepPlyr t dir points player =\n  let player' = stepObj t { player | vy = toFloat dir * 200 }\n      y'      = clamp (22-halfHeight) (halfHeight-22) player'.y\n      score'  = player.score + points\n  in\n      { player' | y = y', score = score' }\n```\n\nNow that we have the `stepBall` and `stepPlyr` helper functions, we can define\na step function for the entire game. Here we are stepping our game forward based\non inputs from the world.\n\n```elm\nstepGame : Input -> Game -> Game\nstepGame input game =\n  let\n    {space,paddle1,paddle2,delta} = input\n    {state,ball,player1,player2} = game\n\n    score1 =\n        if ball.x > halfWidth then 1 else 0\n\n    score2 =\n        if ball.x < -halfWidth then 1 else 0\n\n    state' =\n        if  | space            -> Play\n            | score1 /= score2 -> Pause\n            | otherwise        -> state\n\n    ball' =\n        if state == Pause\n            then ball\n            else stepBall delta ball player1 player2\n\n    player1' = stepPlyr delta paddle1 score1 player1\n    player2' = stepPlyr delta paddle2 score2 player2\n  in\n      { game |\n          state   = state',\n          ball    = ball',\n          player1 = player1',\n          player2 = player2'\n      }\n```\n\nFinally we put together the inputs, the default game, and the step function to\ndefine `gameState`.\n\n```elm\ngameState : Signal Game\ngameState =\n    Signal.foldp stepGame defaultGame input\n```\n\nThis models the state of the game over time.\n\n# View\n\nThe view is totally independent of how the game updates, it is only based on\nthe model. This means we can change how the game looks without changing any of\n*the update logic* of the game.\n\nYou can be as fancy and elaborate as you want in the view, but I will try to\nkeep our display fairly simple! The most interesting thing about this code is\nthat the `displayObj` function allows us to share some code for rendering balls\nand players. The rest of the code is more about drawing the pong court and\ndisplaying scores and instructions nicely.\n\n```elm\n-- helper values\npongGreen = rgb 60 100 60\ntextGreen = rgb 160 200 160\ntxt f = leftAligned << f << monospace << Text.color textGreen << fromString\nmsg = \"SPACE to start, WS and &uarr;&darr; to move\"\n\n\n-- shared function for rendering objects\ndisplayObj : Object a -> Shape -> Form\ndisplayObj obj shape =\n    move (obj.x, obj.y) (filled white shape)\n\n\n-- display a game state\ndisplay : (Int,Int) -> Game -> Element\ndisplay (w,h) {state,ball,player1,player2} =\n  let scores : Element\n      scores =\n          toString player1.score ++ \"  \" ++ toString player2.score\n            |> txt (Text.height 50)\n  in\n      container w h middle <|\n      collage gameWidth gameHeight\n       [ filled pongGreen   (rect gameWidth gameHeight)\n       , displayObj ball    (oval 15 15)\n       , displayObj player1 (rect 10 40)\n       , displayObj player2 (rect 10 40)\n       , toForm scores\n           |> move (0, gameHeight/2 - 40)\n       , toForm (if state == Play then spacer 1 1 else txt identity msg)\n           |> move (0, 40 - gameHeight/2)\n       ]\n```\n\nNow that we have a way to display a particular game state, we just\napply it to our `gameState` that changes over time.\n\n```elm\nmain =\n    Signal.map2 display Window.dimensions gameState\n```\n\nAnd that is it, [Pong in Elm](/examples/pong)!\n\n<br/>\n\n# Further Reading and Exercises\n\nIf you want to read more about FRP for games, see [this paper][afrp]. Note that\nit is specific to Arrowized FRP, which is supported by Elm&rsquo;s\n[Automaton][automaton] library.\n\n [afrp]: http://haskell.cs.yale.edu/wp-content/uploads/2011/01/yampa-arcade.pdf\n [automaton]: http://package.elm-lang.org/packages/evancz/automaton/latest\n\nLearning by doing is a great way to improve your skills, so if you want to\nlearn more about making games in Elm, try tackling some of these challenges:\n\n * Make the Pong field look nicer. Add a line (or dotted line) at mid-field.\n\n * Add the ability to pause the game during game play.\n\n * Add the ability to reset the game (besides refreshing the page!)\n\n * Make ball collisions more complicated. Possiblities:\n\n     * When the ball hits the corner of a paddle, it changes direction.\n\n     * If the ball hits a moving paddle, it adds spin to the ball, making it\n       rebound in a different direction.\n\n * Add a second ball to the game.\n\n * Write a simple AI for a paddle. A simple strategy is to always put the\n   paddle at the same y height as the ball, but this is not very fun to play\n   against. Maybe try an AI that is not so smart to make things more\n   interesting.\n\n")]))(ht(0))(0)}})}(this);
var app = Elm.Main.init({ flags: { width: window.innerWidth, height : window.innerHeight } });
</script>

</body>
</html>
