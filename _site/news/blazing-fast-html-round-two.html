<!DOCTYPE HTML>
<html lang="en">

<head>
  <title>news/blazing-fast-html-round-two</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="A delightful language with friendly error messages, great performance, small assets, and no runtime exceptions.">
  <meta name="robots" content="index, follow">
  <link rel="shortcut icon" sizes="16x16 32x32 48x48 64x64 128x128 256x256" href="/favicon.ico">
  <link rel="stylesheet" rel="preload" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans|Courier+Prime&display=swap">
  <link rel="stylesheet" href="/assets/style.css">
  <link rel="stylesheet" href="/assets/highlight/styles/default.css">
  <script src="/assets/highlight/highlight.pack.js"></script>
</head>

<body>

<script type="text/javascript">
!function(R){"use strict";function e(e,n,t){return t.a=e,t.f=n,t}function s(t){return e(2,t,function(n){return function(e){return t(n,e)}})}function n(r){return e(3,r,function(t){return function(n){return function(e){return r(t,n,e)}}})}function t(i){return e(4,i,function(r){return function(t){return function(n){return function(e){return i(r,t,n,e)}}}})}function r(o){return e(5,o,function(i){return function(r){return function(t){return function(n){return function(e){return o(i,r,t,n,e)}}}}})}function N(a){return e(6,a,function(o){return function(i){return function(r){return function(t){return function(n){return function(e){return a(o,i,r,t,n,e)}}}}}})}function M(s){return e(7,s,function(a){return function(o){return function(i){return function(r){return function(t){return function(n){return function(e){return s(a,o,i,r,t,n,e)}}}}}}})}function D(u){return e(8,u,function(s){return function(a){return function(o){return function(i){return function(r){return function(t){return function(n){return function(e){return u(s,a,o,i,r,t,n,e)}}}}}}}})}function P(c){return e(9,c,function(u){return function(s){return function(a){return function(o){return function(i){return function(r){return function(t){return function(n){return function(e){return c(u,s,a,o,i,r,t,n,e)}}}}}}}}})}function h(e,n,t){return 2===e.a?e.f(n,t):e(n)(t)}function f(e,n,t,r){return 3===e.a?e.f(n,t,r):e(n)(t)(r)}function d(e,n,t,r,i){return 4===e.a?e.f(n,t,r,i):e(n)(t)(r)(i)}function c(e,n,t,r,i,o){return 5===e.a?e.f(n,t,r,i,o):e(n)(t)(r)(i)(o)}function W(e,n,t,r,i,o,a){return 6===e.a?e.f(n,t,r,i,o,a):e(n)(t)(r)(i)(o)(a)}var F=n(function(e,n,t){for(var r=Array(e),i=0;i<e;i++)r[i]=t(n+i);return r}),J=s(function(e,n){for(var t=Array(e),r=0;r<e&&n.b;r++)t[r]=n.a,n=n.b;return t.length=r,{a:t,b:n}}),B=(s(function(e,n){return n[e]}),n(function(e,n,t){for(var r=t.length,i=Array(r),o=0;o<r;o++)i[o]=t[o];return i[e]=n,i}),s(function(e,n){for(var t=n.length,r=Array(t+1),i=0;i<t;i++)r[i]=n[i];return r[t]=e,r}),n(function(e,n,t){for(var r=t.length,i=0;i<r;i++)n=h(e,t[i],n);return n}),n(function(e,n,t){for(var r=t.length-1;0<=r;r--)n=h(e,t[r],n);return n}));s(function(e,n){for(var t=n.length,r=Array(t),i=0;i<t;i++)r[i]=e(n[i]);return r}),n(function(e,n,t){for(var r=t.length,i=Array(r),o=0;o<r;o++)i[o]=h(e,n+o,t[o]);return i}),n(function(e,n,t){return t.slice(e,n)}),n(function(e,n,t){for(var r=n.length,i=e-r,e=r+(i=t.length<i?t.length:i),o=Array(e),a=0;a<r;a++)o[a]=n[a];for(a=0;a<i;a++)o[a+r]=t[a];return o}),s(function(e,n){return n}),s(function(e,n){return console.log(e+": <internals>"),n});function p(e){throw Error("https://github.com/elm/core/blob/1.0.0/hints/"+e+".md")}function H(e,n){for(var t,r=[],i=U(e,n,0,r);i&&(t=r.pop());i=U(t.a,t.b,0,r));return i}function U(e,n,t,r){if(100<t)r.push({a:e,b:n});else if(e!==n){if("object"!=typeof e||null===e||null===n)return"function"==typeof e&&p(5),!1;for(var i in e.$<0&&(e=_n(e),n=_n(n)),e)if(!U(e[i],n[i],t+1,r))return!1}return!0}s(H),s(function(e,n){return!H(e,n)});function a(e,n,t){if("object"!=typeof e)return e===n?0:e<n?-1:1;if(void 0===e.$)return(t=(t=a(e.a,n.a))||a(e.b,n.b))||a(e.c,n.c);for(;e.b&&n.b&&!(t=a(e.a,n.a));e=e.b,n=n.b);return t||(e.b?1:n.b?-1:0)}s(function(e,n){return a(e,n)<0}),s(function(e,n){return a(e,n)<1}),s(function(e,n){return 0<a(e,n)}),s(function(e,n){return 0<=a(e,n)});var Y=s(function(e,n){e=a(e,n);return e<0?Tn:e?In:jn}),i=0;s(function(e,n){if("string"==typeof e)return e+n;if(!e.b)return n;var t={$:1,a:e.a,b:n};e=e.b;for(var r=t;e.b;e=e.b)r=r.b={$:1,a:e.a,b:n};return t});var g={$:0};function V(e,n){return{$:1,a:e,b:n}}var o=s(V);function m(e){for(var n=g,t=e.length;t--;)n={$:1,a:e[t],b:n};return n}function G(e){for(var n=[];e.b;e=e.b)n.push(e.a);return n}var K=n(function(e,n,t){for(var r=[];n.b&&t.b;n=n.b,t=t.b)r.push(h(e,n.a,t.a));return m(r)});t(function(e,n,t,r){for(var i=[];n.b&&t.b&&r.b;n=n.b,t=t.b,r=r.b)i.push(f(e,n.a,t.a,r.a));return m(i)}),r(function(e,n,t,r,i){for(var o=[];n.b&&t.b&&r.b&&i.b;n=n.b,t=t.b,r=r.b,i=i.b)o.push(d(e,n.a,t.a,r.a,i.a));return m(o)}),N(function(e,n,t,r,i,o){for(var a=[];n.b&&t.b&&r.b&&i.b&&o.b;n=n.b,t=t.b,r=r.b,i=i.b,o=o.b)a.push(c(e,n.a,t.a,r.a,i.a,o.a));return m(a)}),s(function(t,e){return m(G(e).sort(function(e,n){return a(t(e),t(n))}))}),s(function(t,e){return m(G(e).sort(function(e,n){e=h(t,e,n);return e===jn?0:e===Tn?-1:1}))}),s(function(e,n){return e+n}),s(function(e,n){return e-n}),s(function(e,n){return e*n}),s(function(e,n){return e/n}),s(function(e,n){return e/n|0}),s(Math.pow),s(function(e,n){return n%e}),s(function(e,n){n%=e;return 0===e?p(11):0<n&&e<0||n<0&&0<e?n+e:n}),s(Math.atan2);var Q=Math.ceil,X=Math.floor,Z=Math.log;s(function(e,n){return e&&n}),s(function(e,n){return e||n}),s(function(e,n){return e!==n}),s(function(e,n){return e+n});s(function(e,n){return e+n});s(function(e,n){for(var t=n.length,r=Array(t),i=0;i<t;){var o=n.charCodeAt(i);55296>o||o>56319?(r[i]=e(n[i]),i++):(r[i]=e(n[i]+n[i+1]),i+=2)}return r.join("")}),s(function(e,n){for(var t=[],r=n.length,i=0;i<r;){var o=n[i],a=n.charCodeAt(i);i++,a<55296||56319<a||(o+=n[i],i++),e(o)&&t.push(o)}return t.join("")});n(function(e,n,t){for(var r=t.length,i=0;i<r;){var o=t[i],a=t.charCodeAt(i);i++,a<55296||56319<a||(o+=t[i],i++),n=h(e,o,n)}return n}),n(function(e,n,t){for(var r=t.length;r--;){var i=t[r],o=t.charCodeAt(r);n=h(e,i=o<56320||57343<o?i:t[--r]+i,n)}return n});var ee=s(function(e,n){return n.split(e)}),ne=s(function(e,n){return n.join(e)}),te=n(function(e,n,t){return t.slice(e,n)});s(function(e,n){for(var t=n.length;t--;){var r=n[t],i=n.charCodeAt(t);if(e(r=i<56320||57343<i?r:n[--t]+r))return!0}return!1});var re=s(function(e,n){for(var t=n.length;t--;){var r=n[t],i=n.charCodeAt(t);if(!e(r=i<56320||57343<i?r:n[--t]+r))return!1}return!0}),ie=s(function(e,n){return!!~n.indexOf(e)}),oe=(s(function(e,n){return 0==n.indexOf(e)}),s(function(e,n){return e.length<=n.length&&n.lastIndexOf(e)==n.length-e.length}),s(function(e,n){var t=e.length;if(t<1)return g;for(var r=0,i=[];-1<(r=n.indexOf(e,r));)i.push(r),r+=t;return m(i)}));s(function(e,n){return{$:6,d:e,b:n}}),s(function(e,n){return{$:7,e:e,b:n}});s(function(e,n){return{$:10,b:n,h:e}});var ae=s(function(e,n){return{$:9,f:e,g:[n]}}),se=n(function(e,n,t){return{$:9,f:e,g:[n,t]}}),ue=(t(function(e,n,t,r){return{$:9,f:e,g:[n,t,r]}}),r(function(e,n,t,r,i){return{$:9,f:e,g:[n,t,r,i]}}),N(function(e,n,t,r,i,o){return{$:9,f:e,g:[n,t,r,i,o]}}),M(function(e,n,t,r,i,o,a){return{$:9,f:e,g:[n,t,r,i,o,a]}}),D(function(e,n,t,r,i,o,a,s){return{$:9,f:e,g:[n,t,r,i,o,a,s]}}),P(function(e,n,t,r,i,o,a,s,u){return{$:9,f:e,g:[n,t,r,i,o,a,s,u]}}),s(function(e,n){try{return b(e,JSON.parse(n))}catch(e){return $(h(qn,"This is not valid JSON! "+e.message,n))}}),s(b));function b(e,n){switch(e.$){case 2:return e.b(n);case 5:return null===n?On(e.c):v("null",n);case 3:return le(n)?ce(e.b,n,m):v("a LIST",n);case 4:return le(n)?ce(e.b,n,he):v("an ARRAY",n);case 6:var t=e.d;return"object"==typeof n&&null!==n&&t in n?(o=b(e.b,n[t]),_(o)?o:$(h(Sn,t,o.a))):v("an OBJECT with a field named `"+t+"`",n);case 7:t=e.e;return le(n)?t<n.length?(o=b(e.b,n[t]),_(o)?o:$(h(Cn,t,o.a))):v("a LONGER array. Need index "+t+" but only see "+n.length+" entries",n):v("an ARRAY",n);case 8:if("object"!=typeof n||null===n||le(n))return v("an OBJECT",n);var r,i=g;for(r in n)if(n.hasOwnProperty(r)){var o=b(e.b,n[r]);if(!_(o))return $(h(Sn,r,o.a));i={$:1,a:{a:r,b:o.a},b:i}}return On(z(i));case 9:for(var a=e.f,s=e.g,u=0;u<s.length;u++){o=b(s[u],n);if(!_(o))return o;a=a(o.a)}return On(a);case 10:o=b(e.b,n);return _(o)?b(e.h(o.a),n):o;case 11:for(var c=g,l=e.g;l.b;l=l.b){o=b(l.a,n);if(_(o))return o;c={$:1,a:o.a,b:c}}return $(Ln(z(c)));case 1:return $(h(qn,e.a,n));case 0:return On(e.a)}}function ce(e,n,t){for(var r=n.length,i=Array(r),o=0;o<r;o++){var a=b(e,n[o]);if(!_(a))return $(h(Cn,o,a.a));i[o]=a.a}return On(t(i))}function le(e){return Array.isArray(e)||"undefined"!=typeof FileList&&e instanceof FileList}function he(n){return h(ht,n.length,function(e){return n[e]})}function v(e,n){return $(h(qn,"Expecting "+e,n))}function u(e,n){if(e===n)return!0;if(e.$!==n.$)return!1;switch(e.$){case 0:case 1:return e.a===n.a;case 2:return e.b===n.b;case 5:return e.c===n.c;case 3:case 4:case 8:return u(e.b,n.b);case 6:return e.d===n.d&&u(e.b,n.b);case 7:return e.e===n.e&&u(e.b,n.b);case 9:return e.f===n.f&&fe(e.g,n.g);case 10:return e.h===n.h&&u(e.b,n.b);case 11:return fe(e.g,n.g)}}function fe(e,n){var t=e.length;if(t!==n.length)return!1;for(var r=0;r<t;r++)if(!u(e[r],n[r]))return!1;return!0}var de=s(function(e,n){return JSON.stringify(n,null,e)+""});function pe(e){return e}n(function(e,n,t){return t[e]=n,t});function ge(e){return{$:0,a:e}}var me=s(function(e,n){return{$:3,b:e,d:n}});s(function(e,n){return{$:4,b:e,d:n}});var be=0;function ve(e){e={$:0,e:be++,f:e,g:null,h:[]};return Ee(e),e}function ye(n){return{$:2,b:function(e){e({$:0,a:ve(n)})},c:null}}function ke(e,n){e.h.push(n),Ee(e)}var we=s(function(n,t){return{$:2,b:function(e){ke(n,t),e({$:0,a:i})},c:null}});var $e=!1,xe=[];function Ee(e){if(xe.push(e),!$e){for($e=!0;e=xe.shift();)!function(n){for(;n.f;){var e=n.f.$;if(0===e||1===e){for(;n.g&&n.g.$!==e;)n.g=n.g.i;if(!n.g)return;n.f=n.g.b(n.f.a),n.g=n.g.i}else{if(2===e)return n.f.c=n.f.b(function(e){n.f=e,Ee(n)});if(5===e){if(0===n.h.length)return;n.f=n.f.b(n.h.shift())}else n.g={$:3===e?0:1,b:n.f.b,i:n.g},n.f=n.f.d}}}(e);$e=!1}}t(function(e,n,t,r){return Ae(n,r,e.dz,e.eC,e.eh,function(){return function(){}})});function Ae(e,n,t,r,i,o){var a=h(ue,e,n?n.flags:void 0),s=(_(a)||p(2),{}),u=(a=t(a.a)).a,c=o(l,u),e=function(e,n){var t,r;for(r in ze){var i=ze[r];i.a&&((t=t||{})[r]=i.a(r,n)),e[r]=function(e,n){var r={g:n,h:void 0},i=e.c,o=e.d,a=e.e,s=e.f;return r.h=ve(h(me,function e(t){return h(me,e,{$:5,b:function(e){var n=e.a;return 0===e.$?f(o,r,n,t):a&&s?d(i,r,n.i,n.j,t):f(i,r,a?n.i:n.j,t)}})},e.b))}(i,n)}return t}(s,l);function l(e,n){a=h(r,e,u),c(u=a.a,n),Te(s,a.b,i(u))}return Te(s,a.b,i(u)),e?{ports:e}:{}}var ze={};var _e=s(function(n,t){return{$:2,b:function(e){n.g(t),e({$:0,a:i})},c:null}});s(function(e,n){return h(we,e.h,{$:0,a:n})});function je(n){return function(e){return{$:1,k:n,l:e}}}function Ie(e){return{$:2,m:e}}s(function(e,n){return{$:3,n:e,o:n}});function Te(e,n,t){var r,i={};for(r in qe(!0,n,i,null),qe(!1,t,i,null),e)ke(e[r],{$:"fx",a:i[r]||{i:g,j:g}})}function qe(e,n,t,r){switch(n.$){case 1:var i=n.k,o=function(e,n,t,r){return h(e?ze[n].e:ze[n].f,function(e){for(var n=t;n;n=n.q)e=n.p(e);return e},r)}(e,i,r,n.l);return void(t[i]=function(e,n,t){return t=t||{i:g,j:g},e?t.i={$:1,a:n,b:t.i}:t.j={$:1,a:n,b:t.j},t}(e,o,t[i]));case 2:for(var a=n.m;a.b;a=a.b)qe(e,a.a,t,r);return;case 3:qe(e,n.o,t,{p:n.n,q:r})}}s(function(e,n){return n});var Se;s(function(n,t){return function(e){return n(t(e))}});var l="undefined"!=typeof document?document:{};t(function(e,n,t,r){r=r.node;return r.parentNode.replaceChild(y(e,function(){}),r),{}});function Ce(e){return{$:0,a:e}}var Oe=s(function(o,a){return s(function(e,n){for(var t=[],r=0;n.b;n=n.b){var i=n.a;r+=i.b||0,t.push(i)}return r+=t.length,{$:1,c:a,d:Fe(e),e:t,f:o,b:r}})})(void 0);s(function(o,a){return s(function(e,n){for(var t=[],r=0;n.b;n=n.b){var i=n.a;r+=i.b.b||0,t.push(i)}return r+=t.length,{$:2,c:a,d:Fe(e),e:t,f:o,b:r}})})(void 0);s(function(e,n){return{$:4,j:e,k:n,b:1+(n.b||0)}});s(function(e,n){return{$:5,l:[e,n],m:function(){return e(n)},k:void 0}}),n(function(e,n,t){return{$:5,l:[e,n,t],m:function(){return h(e,n,t)},k:void 0}}),t(function(e,n,t,r){return{$:5,l:[e,n,t,r],m:function(){return f(e,n,t,r)},k:void 0}}),r(function(e,n,t,r,i){return{$:5,l:[e,n,t,r,i],m:function(){return d(e,n,t,r,i)},k:void 0}}),N(function(e,n,t,r,i,o){return{$:5,l:[e,n,t,r,i,o],m:function(){return c(e,n,t,r,i,o)},k:void 0}}),M(function(e,n,t,r,i,o,a){return{$:5,l:[e,n,t,r,i,o,a],m:function(){return W(e,n,t,r,i,o,a)},k:void 0}}),D(function(e,n,t,r,i,o,a,s){return{$:5,l:[e,n,t,r,i,o,a,s],m:function(){return function(e,n,t,r,i,o,a,s){return 7===e.a?e.f(n,t,r,i,o,a,s):e(n)(t)(r)(i)(o)(a)(s)}(e,n,t,r,i,o,a,s)},k:void 0}}),P(function(e,n,t,r,i,o,a,s,u){return{$:5,l:[e,n,t,r,i,o,a,s,u],m:function(){return function(e,n,t,r,i,o,a,s,u){return 8===e.a?e.f(n,t,r,i,o,a,s,u):e(n)(t)(r)(i)(o)(a)(s)(u)}(e,n,t,r,i,o,a,s,u)},k:void 0}});var Le=s(function(e,n){return{$:"a0",n:e,o:n}}),Re=s(function(e,n){return{$:"a1",n:e,o:n}}),Ne=s(function(e,n){return{$:"a2",n:e,o:n}}),Me=s(function(e,n){return{$:"a3",n:e,o:n}});n(function(e,n,t){return{$:"a4",n:n,o:{f:e,o:t}}});s(function(e,n){return"a0"===n.$?h(Le,n.n,function(e,n){var t=gt(n);return{$:n.$,a:t?f(dt,t<3?Pe:We,pt(e),n.a):h(ft,e,n.a)}}(e,n.o)):n});var De,Pe=s(function(e,n){return{a:e(n.a),b:n.b}}),We=s(function(e,n){return{G:e(n.G),bk:n.bk,bc:n.bc}});function Fe(e){for(var n={};e.b;e=e.b){var t,r=e.a,i=r.$,o=r.n,r=r.o;"a2"===i?"className"===o?Je(n,o,r):n[o]=r:(t=n[i]||(n[i]={}),"a3"===i&&"class"===o?Je(t,o,r):t[o]=r)}return n}function Je(e,n,t){var r=e[n];e[n]=r?r+" "+t:t}function y(e,n){var t=e.$;if(5===t)return y(e.k||(e.k=e.m()),n);if(0===t)return l.createTextNode(e.a);if(4===t){for(var r=e.k,i=e.j;4===r.$;)"object"!=typeof i?i=[i,r.j]:i.push(r.j),r=r.k;var o={j:i,p:n};(a=y(r,o)).elm_event_node_ref=o}else if(3===t)Be(a=e.h(e.g),n,e.d);else{var a=e.f?l.createElementNS(e.f,e.c):l.createElement(e.c);Se&&"a"==e.c&&a.addEventListener("click",Se(a)),Be(a,n,e.d);for(var s=e.e,u=0;u<s.length;u++)a.appendChild(y(1===t?s[u]:s[u].b,n))}return a}function Be(e,n,t){for(var r in t){var i=t[r];"a1"===r?function(e,n){var t,r=e.style;for(t in n)r[t]=n[t]}(e,i):"a0"===r?function(e,n,t){var r,i=e.elmFs||(e.elmFs={});for(r in t){var o=t[r],a=i[r];if(o){if(a){if(a.q.$===o.$){a.q=o;continue}e.removeEventListener(r,a)}a=function(u,e){function c(e){var n=c.q,t=b(n.a,e);if(_(t)){for(var r,n=gt(n),t=t.a,i=n?n<3?t.a:t.G:t,o=1==n?t.b:3==n&&t.bk,a=(o&&e.stopPropagation(),(2==n?t.b:3==n&&t.bc)&&e.preventDefault(),u);r=a.j;){if("function"==typeof r)i=r(i);else for(var s=r.length;s--;)i=r[s](i);a=a.p}a(i,o)}}return c.q=e,c}(n,o),e.addEventListener(r,a,De&&{passive:gt(o)<2}),i[r]=a}else e.removeEventListener(r,a),i[r]=void 0}}(e,n,i):"a3"===r?function(e,n){for(var t in n){var r=n[t];void 0!==r?e.setAttribute(t,r):e.removeAttribute(t)}}(e,i):"a4"===r?function(e,n){for(var t in n){var r=n[t],i=r.f,r=r.o;void 0!==r?e.setAttributeNS(i,t,r):e.removeAttributeNS(i,t)}}(e,i):("value"!==r&&"checked"!==r||e[r]!==i)&&(e[r]=i)}}try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){De=!0}}))}catch(e){}function He(e,n){var t=[];return T(e,n,t,0),t}function I(e,n,t,r){n={$:n,r:t,s:r,t:void 0,u:void 0};return e.push(n),n}function T(e,n,t,r){if(e!==n){var i=e.$,o=n.$;if(i!==o){if(1!==i||2!==o)return void I(t,0,r,n);n=function(e){for(var n=e.e,t=n.length,r=Array(t),i=0;i<t;i++)r[i]=n[i].b;return{$:1,c:e.c,d:e.d,e:r,f:e.f,b:e.b}}(n),o=1}switch(o){case 5:for(var a=e.l,s=n.l,u=a.length,c=u===s.length;c&&u--;)c=a[u]===s[u];if(c)return void(n.k=e.k);n.k=n.m();var l=[];return T(e.k,n.k,l,0),void(0<l.length&&I(t,1,r,l));case 4:for(var h=e.j,f=n.j,d=!1,p=e.k;4===p.$;)d=!0,"object"!=typeof h?h=[h,p.j]:h.push(p.j),p=p.k;for(var g=n.k;4===g.$;)d=!0,"object"!=typeof f?f=[f,g.j]:f.push(g.j),g=g.k;return d&&h.length!==f.length?void I(t,0,r,n):((d?function(e,n){for(var t=0;t<e.length;t++)if(e[t]!==n[t])return;return 1}(h,f):h===f)||I(t,2,r,f),void T(p,g,t,r+1));case 0:return void(e.a!==n.a&&I(t,3,r,n.a));case 1:return void Ue(e,n,t,r,Ve);case 2:return void Ue(e,n,t,r,Ge);case 3:if(e.h!==n.h)return void I(t,0,r,n);l=Ye(e.d,n.d),l=(l&&I(t,4,r,l),n.i(e.g,n.g));l&&I(t,5,r,l)}}}function Ue(e,n,t,r,i){var o;e.c!==n.c||e.f!==n.f?I(t,0,r,n):((o=Ye(e.d,n.d))&&I(t,4,r,o),i(e,n,t,r))}function Ye(e,n,t){var r,i,o,a,s;for(i in e)"a1"===i||"a0"===i||"a3"===i||"a4"===i?(o=Ye(e[i],n[i]||{},i))&&((r=r||{})[i]=o):i in n?(o=e[i])===(a=n[i])&&"value"!==i&&"checked"!==i||"a0"===t&&function(e,n){return e.$==n.$&&u(e.a,n.a)}(o,a)||((r=r||{})[i]=a):(r=r||{})[i]=t?"a1"===t?"":"a0"===t||"a3"===t?void 0:{f:e[i].f,o:void 0}:"string"==typeof e[i]?"":null;for(s in n)s in e||((r=r||{})[s]=n[s]);return r}function Ve(e,n,t,r){var i=e.e,o=n.e,e=i.length,n=o.length;n<e?I(t,6,r,{v:n,i:e-n}):e<n&&I(t,7,r,{v:e,e:o});for(var a=e<n?e:n,s=0;s<a;s++){var u=i[s];T(u,o[s],t,++r),r+=u.b||0}}function Ge(e,n,t,r){for(var i=[],o={},a=[],s=e.e,u=n.e,c=s.length,l=u.length,h=0,f=0,d=r;h<c&&f<l;){var p=s[h],g=u[f],m=p.a,b=g.a,v=p.b,y=g.b,k=void 0,w=void 0;if(m===b)T(v,y,i,++d),d+=v.b||0,h++,f++;else{var $,x,E,A,z=s[h+1],_=u[f+1];if(z&&(x=z.b,w=b===($=z.a)),_&&(A=_.b,k=m===(E=_.a)),k&&w)T(v,A,i,++d),Qe(o,i,m,y,f,a),d+=v.b||0,Xe(o,i,m,x,++d),d+=x.b||0,h+=2,f+=2;else if(k)d++,Qe(o,i,b,y,f,a),T(v,A,i,d),d+=v.b||0,h+=1,f+=2;else if(w)Xe(o,i,m,v,++d),d+=v.b||0,T(x,y,i,++d),d+=x.b||0,h+=2,f+=1;else{if(!z||$!==E)break;Xe(o,i,m,v,++d),Qe(o,i,b,y,f,a),d+=v.b||0,T(x,A,i,++d),d+=x.b||0,h+=2,f+=2}}}for(;h<c;){v=(p=s[h]).b;Xe(o,i,p.a,v,++d),d+=v.b||0,h++}for(;f<l;){var j=j||[];Qe(o,i,(g=u[f]).a,g.b,void 0,j),f++}(0<i.length||0<a.length||j)&&I(t,8,r,{w:i,x:a,y:j})}var Ke="_elmW6BL";function Qe(e,n,t,r,i,o){var a,s=e[t];s?1===s.c?(o.push({r:i,A:s}),s.c=2,T(s.z,r,a=[],s.r),s.r=i,s.s.s={w:a,A:s}):Qe(e,n,t+Ke,r,i,o):(o.push({r:i,A:s={c:0,z:r,r:i,s:void 0}}),e[t]=s)}function Xe(e,n,t,r,i){var o,a=e[t];a?0===a.c?(a.c=2,T(r,a.z,o=[],i),I(n,9,i,{w:o,A:a})):Xe(e,n,t+Ke,r,i):(o=I(n,9,i,void 0),e[t]={c:1,z:r,r:i,s:o})}function Ze(e,n,t,r){!function e(n,t,r,i,o,a,s){var u=r[i];var c=u.r;for(;c===o;){var l,h=u.$;if(1===h?Ze(n,t.k,u.s,s):8===h?(u.t=n,u.u=s,0<(l=u.s.w).length&&e(n,t,l,0,o,a,s)):9===h?(u.t=n,u.u=s,(h=u.s)&&(h.A.s=n,0<(l=h.w).length)&&e(n,t,l,0,o,a,s)):(u.t=n,u.u=s),!(u=r[++i])||(c=u.r)>a)return i}var f=t.$;if(4===f){for(var d=t.k;4===d.$;)d=d.k;return e(n,d,r,i,o+1,a,n.elm_event_node_ref)}var p=t.e;var g=n.childNodes;for(var m=0;m<p.length;m++){var b=1===f?p[m]:p[m].b,v=++o+(b.b||0);if(o<=c&&c<=v&&(i=e(g[m],b,r,i,o,v,s),!(u=r[i])||(c=u.r)>a))return i;o=v}return i}(e,n,t,0,0,n.b,r)}function en(e,n,t,r){return 0===t.length?e:(Ze(e,n,t,r),nn(e,t))}function nn(e,n){for(var t=0;t<n.length;t++){var r=n[t],i=r.t,r=function(e,n){switch(n.$){case 0:return function(e,n,t){var r=e.parentNode,n=y(n,t);n.elm_event_node_ref||(n.elm_event_node_ref=e.elm_event_node_ref);r&&n!==e&&r.replaceChild(n,e);return n}(e,n.s,n.u);case 4:return Be(e,n.u,n.s),e;case 3:return e.replaceData(0,e.length,n.s),e;case 1:return nn(e,n.s);case 2:return e.elm_event_node_ref?e.elm_event_node_ref.j=n.s:e.elm_event_node_ref={j:n.s,p:n.u},e;case 6:for(var t=n.s,r=0;r<t.i;r++)e.removeChild(e.childNodes[t.v]);return e;case 7:for(var i=(t=n.s).e,r=t.v,o=e.childNodes[r];r<i.length;r++)e.insertBefore(y(i[r],n.u),o);return e;case 9:var a;return(t=n.s)?(void 0!==(a=t.A).r&&e.parentNode.removeChild(e),a.s=nn(e,t.w)):e.parentNode.removeChild(e),e;case 8:return function(e,n){for(var t=n.s,r=function(e,n){if(e){for(var t=l.createDocumentFragment(),r=0;r<e.length;r++){var i=e[r].A;t.appendChild(2===i.c?i.s:y(i.z,n.u))}return t}}(t.y,n),i=(e=nn(e,t.w),t.x),o=0;o<i.length;o++){var a=i[o],s=a.A,s=2===s.c?s.s:y(s.z,n.u);e.insertBefore(s,e.childNodes[a.r])}r&&e.appendChild(r);return e}(e,n);case 5:return n.s(e);default:p(10)}}(i,r);i===e&&(e=r)}return e}function tn(e){if(3===e.nodeType)return{$:0,a:e.textContent};if(1!==e.nodeType)return{$:0,a:""};for(var n=g,t=e.attributes,r=t.length;r--;)var i=t[r],n={$:1,a:h(Me,i.name,i.value),b:n};for(var o=e.tagName.toLowerCase(),a=g,s=e.childNodes,r=s.length;r--;)a={$:1,a:tn(s[r]),b:a};return f(Oe,o,n,a)}var rn=n(function(e,n,t){return function(e,n,t,r){return{$:3,d:Fe(e),g:n,h:t,i:r}}(n,{a:e,b:t},on,an)});function on(e){return h(cn,e,l.createElement("div"))}function an(e,n){return(e.b!==n.b||e.a!==n.a)&&cn(n)}var sn,un,cn=s(function(e,n){var t;return n.innerHTML=ln(e.b,{highlight:function(e,n){return!n&&wt(t.dj)&&(n=t.dj.a),"undefined"!=typeof hljs&&n&&~hljs.listLanguages().indexOf(n)?hljs.highlight(n,e,!0).value:e},gfm:e=(t=e.a).dr.a,tables:e&&e.ei,breaks:e&&e.c7,sanitize:t.dY,smartypants:t.d5}),n}),ln=(un=(sn={}).exports={},function(){var l={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:n,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:n,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:n,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function u(e){this.tokens=[],this.tokens.links={},this.options=e||d.defaults,this.rules=l.normal,this.options.gfm&&(this.rules=this.options.tables?l.tables:l.gfm)}l.bullet=/(?:[*+-]|\d+\.)/,l.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,l.item=e(l.item,"gm")(/bull/g,l.bullet)(),l.list=e(l.list)(/bull/g,l.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+l.def.source+")")(),l.blockquote=e(l.blockquote)("def",l.def)(),l._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",l.html=e(l.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,l._tag)(),l.paragraph=e(l.paragraph)("hr",l.hr)("heading",l.heading)("lheading",l.lheading)("blockquote",l.blockquote)("tag","<"+l._tag)("def",l.def)(),l.normal=f({},l),l.gfm=f({},l.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),l.gfm.paragraph=e(l.paragraph)("(?!","(?!"+l.gfm.fences.source.replace("\\1","\\2")+"|"+l.list.source.replace("\\1","\\3")+"|")(),l.tables=f({},l.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),u.rules=l,u.lex=function(e,n){return new u(n).lex(e)},u.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},u.prototype.token=function(e,n,t){for(var r,i,o,a,s,u,c,e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),1<i[0].length)&&this.tokens.push({type:"space"}),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(n&&(i=this.rules.nptable.exec(e))){for(e=e.substring(i[0].length),a={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},u=0;u<a.align.length;u++)a.align[u]=/^ *-+: *$/.test(a.align[u])?"right":/^ *:-+: *$/.test(a.align[u])?"center":/^ *:-+ *$/.test(a.align[u])?"left":null;for(u=0;u<a.cells.length;u++)a.cells[u]=a.cells[u].split(/ *\| */);this.tokens.push(a)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,n,!0),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),this.tokens.push({type:"list_start",ordered:1<(o=i[2]).length}),r=!1,c=(i=i[0].match(this.rules.item)).length,u=0;u<c;u++)s=(a=i[u]).length,~(a=a.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(s-=a.length,a=a.replace(this.options.pedantic?/^ {1,4}/gm:RegExp("^ {1,"+s+"}","gm"),"")),!this.options.smartLists||u===c-1||o===(s=l.bullet.exec(i[u+1])[0])||1<o.length&&1<s.length||(e=i.slice(u+1).join("\n")+e,u=c-1),s=r||/\n\n(?!\s*$)/.test(a),u!==c-1&&(r="\n"==(a[0|a.length-1]||""),s=s||r),this.tokens.push({type:s?"loose_item_start":"list_item_start"}),this.token(a,!1,t),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:i[0]});else if(!t&&n&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(n&&(i=this.rules.table.exec(e))){for(e=e.substring(i[0].length),a={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;u<a.align.length;u++)a.align[u]=/^ *-+: *$/.test(a.align[u])?"right":/^ *:-+: *$/.test(a.align[u])?"center":/^ *:-+ *$/.test(a.align[u])?"left":null;for(u=0;u<a.cells.length;u++)a.cells[u]=a.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a)}else if(n&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"==(i[1][0|i[1].length-1]||"")?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var t={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:n,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^_\_([\s\S]+?)_\_(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|_\_)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:n,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};function r(e,n){if(this.options=n||d.defaults,this.links=e,this.rules=t.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?t.breaks:t.gfm:this.options.pedantic&&(this.rules=t.pedantic)}function i(e){this.options=e||{}}function c(e){this.tokens=[],this.token=null,this.options=e||d.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function h(e,n){return e.replace(n?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function e(r,i){return r=r.source,i=i||"",function e(n,t){return n?(t=(t=t.source||t).replace(/(^|[^\[])\^/g,"$1"),r=r.replace(n,t),e):RegExp(r,i)}}function n(){}function f(e){for(var n,t,r=1;r<arguments.length;r++)for(t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}function d(e,t,r){if(r||"function"==typeof t){r||(r=t,t=null);var i,o=(t=f({},d.defaults,t||{})).highlight,n=0;try{i=u.lex(e,t)}catch(e){return r(e)}var a=i.length,s=function(n){if(n)return t.highlight=o,r(n);var e;try{e=c.parse(i,t)}catch(e){n=e}return t.highlight=o,n?r(n):r(null,e)};if(!o||o.length<3)return s();if(delete t.highlight,!a)return s();for(;n<i.length;n++)!function(t){"code"!==t.type?--a||s():o(t.text,t.lang,function(e,n){return e?s(e):null==n||n===t.text?--a||s():(t.text=n,t.escaped=!0,void(--a||s()))})}(i[n])}else try{return t=t&&f({},d.defaults,t),c.parse(u.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/chjj/marked.",(t||d.defaults).silent)return"<p>An error occured:</p><pre>"+h(e.message+"",!0)+"</pre>";throw e}}t._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,t._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,t.link=e(t.link)("inside",t._inside)("href",t._href)(),t.reflink=e(t.reflink)("inside",t._inside)(),t.normal=f({},t),t.pedantic=f({},t.normal,{strong:/^_\_(?=\S)([\s\S]*?\S)_\_(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),t.gfm=f({},t.normal,{escape:e(t.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:e(t.text)("]|","~]|")("|","|https?://|")()}),t.breaks=f({},t.gfm,{br:e(t.br)("{2,}","*")(),text:e(t.gfm.text)("{2,}","*")()}),r.rules=t,r.output=function(e,n,t){return new r(n,t).output(e)},r.prototype.output=function(e){for(var n,t,r,i,o="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),o+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),r="@"===i[2]?(t=this.mangle(":"==(i[1][6]||"")?i[1].substring(7):i[1]),this.mangle("mailto:")+t):t=h(i[1]),o+=this.renderer.link(r,null,t);else if(!this.inLink&&(i=this.rules.url.exec(e)))e=e.substring(i[0].length),r=t=h(i[1]),o+=this.renderer.link(r,null,t);else if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):h(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,o+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if(i=(i=this.rules.reflink.exec(e))||this.rules.nolink.exec(e))e=e.substring(i[0].length),n=(i[2]||i[1]).replace(/\s+/g," "),(n=this.links[n.toLowerCase()])&&n.href?(this.inLink=!0,o+=this.outputLink(i,n),this.inLink=!1):(o+=i[0][0]||"",e=i[0].substring(1)+e);else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),o+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),o+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),o+=this.renderer.codespan(h(i[2],!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),o+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),o+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),o+=this.renderer.text(h(this.smartypants(i[0])));else if(e)throw Error("Infinite loop on byte: "+e.charCodeAt(0));return o},r.prototype.outputLink=function(e,n){var t=h(n.href),n=n.title?h(n.title):null;return"!"!=(e[0][0]||"")?this.renderer.link(t,n,this.output(e[1])):this.renderer.image(t,n,h(e[1]))},r.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},r.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var n,t="",r=e.length,i=0;i<r;i++)n=e.charCodeAt(i),t+="&#"+(n=.5<Math.random()?"x"+n.toString(16):n)+";";return t},i.prototype.code=function(e,n,t){var r;return this.options.highlight&&null!=(r=this.options.highlight(e,n))&&r!==e&&(t=!0,e=r),n?'<pre><code class="'+this.options.langPrefix+h(n,!0)+'">'+(t?e:h(e,!0))+"\n</code></pre>\n":"<pre><code>"+(t?e:h(e,!0))+"\n</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,n,t){return"<h"+n+' id="'+this.options.headerPrefix+t.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+n+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,n){n=n?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,n){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+n+"</tbody>\n</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,n){var t=n.header?"th":"td";return(n.align?"<"+t+' style="text-align:'+n.align+'">':"<"+t+">")+e+"</"+t+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,n,t){if(this.options.sanitize){try{var r=decodeURIComponent(e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(e,n){return"colon"===(n=n.toLowerCase())?":":"#"==(n[0]||"")?String.fromCharCode("x"==(n[1]||"")?parseInt(n.substring(2),16):+n.substring(1)):""})).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(!r.indexOf("javascript:")||!r.indexOf("vbscript:")||!r.indexOf("data:"))return""}r='<a href="'+e+'"';return n&&(r+=' title="'+n+'"'),r+=">"+t+"</a>"},i.prototype.image=function(e,n,t){e='<img src="'+e+'" alt="'+t+'"';return n&&(e+=' title="'+n+'"'),e+=this.options.xhtml?"/>":">"},i.prototype.text=function(e){return e},c.parse=function(e,n,t){return new c(n).parse(e)},c.prototype.parse=function(e){this.inline=new r(e.links,this.options),this.tokens=e.reverse();for(var n="";this.next();)n+=this.tok();return n},c.prototype.next=function(){return this.token=this.tokens.pop()},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":for(var e,n,t="",r="",i="",o=0;o<this.token.header.length;o++)i+=this.renderer.tablecell(this.inline.output(this.token.header[o]),{header:!0,align:this.token.align[o]});for(t+=this.renderer.tablerow(i),o=0;o<this.token.cells.length;o++){for(e=this.token.cells[o],i="",n=0;n<e.length;n++)i+=this.renderer.tablecell(this.inline.output(e[n]),{header:!1,align:this.token.align[n]});r+=this.renderer.tablerow(i)}return this.renderer.table(t,r);case"blockquote_start":for(r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":for(var r="",t=this.token.ordered;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,t);case"list_item_start":for(r="";"list_item_end"!==this.next().type;)r+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(r);case"loose_item_start":for(r="";"list_item_end"!==this.next().type;)r+=this.tok();return this.renderer.listitem(r);case"html":t=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(t);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},n.exec=n,d.options=d.setOptions=function(e){return f(d.defaults,e),d},d.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},d.Parser=c,d.parser=c.parse,d.Renderer=i,d.Lexer=u,d.lexer=u.lex,d.InlineLexer=r,d.inlineLexer=r.output,d.parse=d,void 0!==sn&&"object"==typeof un?sn.exports=d:"function"==typeof define&&define.amd?define(function(){return d}):this.marked=d}.call(function(){return this||("undefined"!=typeof window?window:global)}()),sn.exports);t(function(n,e,t,a){return Ae(e,a,n.dz,n.eC,n.eh,function(t,e){var r=n.eD,i=a.node,o=tn(i);return dn(e,function(e){var e=r(e),n=He(o,e);i=en(i,o,n,t),o=e})})});var hn=t(function(n,e,t,r){return Ae(e,r,n.dz,n.eC,n.eh,function(r,e){var i=n.bg&&n.bg(r),o=n.eD,a=l.title,s=l.body,u=tn(s);return dn(e,function(e){Se=i;var e=o(e),n=Oe("body")(g)(e.c$),t=He(u,n);s=en(s,u,t,r),u=n,Se=0,a!==e.ey&&(l.title=a=e.ey)})})}),fn="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(e){return setTimeout(e,1e3/60)};function dn(t,r){r(t);var i=0;function o(){i=1===i?0:(fn(o),r(t),1)}return function(e,n){t=e,n?(r(t),2===i&&(i=1)):(0===i&&fn(o),i=2)}}s(function(e,n){return h(Zt,Ft,{$:2,b:function(){n&&history.go(n),e()},c:null})}),s(function(e,n){return h(Zt,Ft,{$:2,b:function(){history.pushState({},"",n),e()},c:null})}),s(function(e,n){return h(Zt,Ft,{$:2,b:function(){history.replaceState({},"",n),e()},c:null})});var pn={addEventListener:function(){},removeEventListener:function(){}},gn="undefined"!=typeof window?window:pn;n(function(t,r,i){return ye({$:2,b:function(e){function n(e){ve(i(e))}return t.addEventListener(r,n,De&&{passive:!0}),function(){t.removeEventListener(r,n)}},c:null})}),s(function(e,n){e=b(e,n);return _(e)?x(e.a):E});function mn(t,r){return{$:2,b:function(n){fn(function(){var e=document.getElementById(t);n(e?{$:0,a:r(e)}:{$:1,a:Tt(t)})})},c:null}}s(function(n,e){return mn(e,function(e){return e[n](),i})});s(function(e,n){return t=function(){return gn.scroll(e,n),i},{$:2,b:function(e){fn(function(){e({$:0,a:t()})})},c:null};var t});n(function(e,n,t){return mn(e,function(e){return e.scrollLeft=n,e.scrollTop=t,i})});function bn(e){return h(Mn,"\n    ",h(Dn,"\n",e))}function vn(e){return f(Pn,s(function(e,n){return n+1}),0,e)}function yn(e){return 97<=(e=Hn(e))&&e<=122}function kn(e){return(e=Hn(e))<=90&&65<=e}function wn(e){return yn(e)||kn(e)||function(e){e=Hn(e);return e<=57&&48<=e}(e)}function k(e){return h(bt,"href",/^javascript:/i.test((e=e).replace(/\s/g,""))?"":e)}function $n(e){return m([h(C,"display","block"),h(C,"max-width",e),h(C,"margin","0 auto")])}function xn(e){return h(S,h(w,q("content"),$n("800px")),m([h(j,m([k("https://evancz.github.io/react-angular-ember-elm-performance-comparison/"),yt("Run the benchmarks yourself!")]),m([h(vt,m([h(bt,"src",/^\s*(javascript:|data:text\/html)/i.test(e=e="/assets/blog/virtual-dom-charts/"+e+".png")?"":e)]),g)]))]))}function En(e){return e}var w=o,An=B,zn=(n(function(t,e,n){var r=n.c,n=n.d,i=s(function(e,n){return f(An,e.$?t:i,n,e.a)});return f(An,i,f(An,t,e,n),r)}),n(function(e,n,t){for(;;){if(-2===t.$)return n;var r=t.d,i=e,o=f(e,t.b,t.c,f(zn,e,n,t.e));e=i,n=o,t=r}})),_n=function(e){return f(zn,n(function(e,n,t){return h(w,{a:e,b:n},t)}),g,e)},jn=1,In=2,Tn=0,pn=n(function(e,n,t){return{bA:t,cb:n,bq:e}}),$=function(e){return{$:1,a:e}},qn=s(function(e,n){return{$:3,a:e,b:n}}),Sn=s(function(e,n){return{$:0,a:e,b:n}}),Cn=s(function(e,n){return{$:1,a:e,b:n}}),On=function(e){return{$:0,a:e}},Ln=function(e){return{$:2,a:e}},x=function(e){return{$:0,a:e}},E={$:1},Rn=re,Nn=de,A=function(e){return e+""},Mn=s(function(e,n){return h(ne,e,G(n))}),Dn=s(function(e,n){return m(h(ee,e,n))}),Pn=n(function(e,n,t){for(;;){if(!t.b)return n;var r=t.b,i=e,o=h(e,t.a,n);e=i,n=o,t=r}}),Wn=K,Fn=n(function(e,n,t){for(;;){if(1<=a(e,n))return t;var r=e,i=n-1,o=h(w,n,t);e=r,n=i,t=o}}),Jn=s(function(e,n){return f(Fn,e,n,g)}),Bn=s(function(e,n){return f(Wn,e,h(Jn,0,vn(n)-1),n)}),Hn=function(e){var n=e.charCodeAt(0);return n<55296||56319<n?n:1024*(n-55296)+e.charCodeAt(1)-56320+65536},z=function(e){return f(Pn,w,g,e)},Un=function(e){var n=e.charCodeAt(0);return n?x(n<55296||56319<n?{a:e[0],b:e.slice(1)}:{a:e[0]+e[1],b:e.slice(2)}):E},Yn=s(function(e,n){return"\n\n("+A(e+1)+(") "+bn(Vn(n)))}),Vn=function(e){return h(Gn,e,g)},Gn=s(function(e,n){for(;;)switch(e.$){case 0:var t=e.a,r=e.b,i=(i=o=void 0,1!==(i=Un(t)).$&&(o=(i=i.a).b,function(e){return yn(e)||kn(e)}(i.a))&&h(Rn,wn,o)),o=r,i=h(w,i?"."+t:"['"+t+"']",n);e=o,n=i;continue;case 1:var r=e.b,t="["+A(e.a)+"]",o=r,i=h(w,t,n);e=o,n=i;continue;case 2:var a=e.a;if(a.b){if(a.b.b)return s=(n.b?"The Json.Decode.oneOf at json"+h(Mn,"",z(n)):"Json.Decode.oneOf")+" failed in the following "+A(vn(a))+" ways:",h(Mn,"\n\n",h(w,s,h(Bn,Yn,a)));e=o=r=a.a,n=i=n;continue}return"Ran into a Json.Decode.oneOf with no possibilities"+(n.b?" at json"+h(Mn,"",z(n)):"!");default:var s,a=e.a,u=e.b;return(s=n.b?"Problem with the value at json"+h(Mn,"",z(n))+":\n\n    ":"Problem with the given value:\n\n")+(bn(h(Nn,4,u))+"\n\n")+a}var o,i}),Kn=t(function(e,n,t,r){return{$:0,a:e,b:n,c:t,d:r}}),Qn=[],Xn=Q,Zn=s(function(e,n){return Z(n)/Z(e)}),et=Xn(h(Zn,2,32)),nt=d(Kn,0,et,Qn,Qn),tt=F,rt=(s(function(e,n){return e(n)}),s(function(e,n){return n(e)}),X),it=function(e){return e.length},ot=s(function(e,n){return 0<a(e,n)?e:n}),at=J,st=s(function(e,n){for(;;){var t=h(at,32,e),r=t.b,t=h(w,{$:0,a:t.a},n);if(!r.b)return z(t);e=r,n=t}}),ut=s(function(e,n){for(;;){var t=Xn(n/32);if(1===t)return h(at,32,e).a;e=h(st,e,g),n=t}}),ct=s(function(e,n){var t,r;return n.c?(r=rt(h(Zn,32,(t=32*n.c)-1)),e=e?z(n.g):n.g,e=h(ut,e,n.c),d(Kn,it(n.f)+t,h(ot,5,r*et),e,n.f)):d(Kn,it(n.f),et,Qn,n.f)}),lt=r(function(e,n,t,r,i){for(;;){if(n<0)return h(ct,!1,{g:r,c:t/32|0,f:i});var o={$:1,a:f(tt,32,n,e)};e=e,n=n-32,t=t,r=h(w,o,r),i=i}}),ht=s(function(e,n){var t,r;return 0<e?(r=f(tt,t=e%32,e-t,n),c(lt,n,e-t-32,e,g,r)):nt}),_=function(e){return!e.$},ft=ae,dt=se,pt=function(e){return{$:0,a:e}},gt=function(e){switch(e.$){case 0:return 0;case 1:return 1;case 2:return 2;default:return 3}},j=Oe("a"),mt=pe,bt=s(function(e,n){return h(Ne,e,mt(n))}),q=bt("className"),S=Oe("div"),vt=Oe("img"),C=Re,yt=bt("title"),kt={dj:E,dr:x({c7:!1,ei:!1}),dY:!1,d5:!1},wt=function(e){return!e.$},$t=rn,o=s(function(e,n){return h(S,h(w,q("content"),$n(e)),m([f($t,kt,g,n)]))}),xt=Y,Et=s(function(e,n){for(;;){if(-2===n.$)return E;var t=n.c,r=n.d,i=n.e;switch(h(xt,e,n.b)){case 0:e=e,n=r;continue;case 1:return x(t);default:e=e,n=i;continue}}}),At={$:-2},B=At,O=r(function(e,n,t,r,i){return{$:-1,a:e,b:n,c:t,d:r,e:i}}),zt=r(function(e,n,t,r,i){var o,a,s,u;return-1!==i.$||i.a?-1!==r.$||r.a||-1!==r.d.$||r.d.a?c(O,e,n,t,r,i):(o=r.d,u=r.e,c(O,0,r.b,r.c,c(O,1,o.b,o.c,o.d,o.e),c(O,1,n,t,u,i))):(o=i.b,a=i.c,s=i.d,i=i.e,-1!==r.$||r.a?c(O,e,o,a,c(O,0,n,t,r,s),i):c(O,0,n,t,c(O,1,r.b,r.c,r.d,u=r.e),c(O,1,o,a,s,i)))}),_t=n(function(e,n,t){if(-2===t.$)return c(O,0,e,n,At,At);var r=t.a,i=t.b,o=t.c,a=t.d,s=t.e;switch(h(xt,e,i)){case 0:return c(zt,r,i,o,f(_t,e,n,a),s);case 1:return c(O,r,i,n,a,s);default:return c(zt,r,i,o,a,f(_t,e,n,s))}}),jt=n(function(e,n,t){e=f(_t,e,n,t);return-1!==e.$||e.a?e:c(O,1,e.b,e.c,e.d,e.e)}),It=(re=m([{a:1,b:"Jan"},{a:2,b:"Feb"},{a:3,b:"Mar"},{a:4,b:"Apr"},{a:5,b:"May"},{a:6,b:"June"},{a:7,b:"July"},{a:8,b:"Aug"},{a:9,b:"Sep"},{a:10,b:"Oct"},{a:11,b:"Nov"},{a:12,b:"Dec"}]),f(Pn,s(function(e,n){return f(jt,e.a,e.b,n)}),B,re)),Tt=En,qt=N(function(e,n,t,r,i,o){return{bF:o,bM:n,ci:r,ck:t,cn:e,co:i}}),St=ie,Ct=function(e){return e.length},Ot=te,Lt=s(function(e,n){return e<1?n:f(Ot,e,Ct(n),n)}),Rt=oe,Nt=s(function(e,n){return e<1?"":f(Ot,0,e,n)}),Mt=function(e){for(var n=0,t=e.charCodeAt(0),r=43==t||45==t?1:0,i=r;i<e.length;++i){var o=e.charCodeAt(i);if(o<48||57<o)return E;n=10*n+o-48}return i==r?E:x(45==t?-n:n)},Dt=r(function(e,n,t,r,i){var o,a;return""===i||h(St,"@",i)?E:(o=h(Rt,":",i)).b?o.b.b||1===(a=Mt(h(Lt,(o=o.a)+1,i))).$?E:(a=a,x(W(qt,e,h(Nt,o,i),a,n,t,r))):x(W(qt,e,i,E,n,t,r))}),Pt=t(function(e,n,t,r){var i;return""===r?E:(i=h(Rt,"/",r)).b?c(Dt,e,h(Lt,i=i.a,r),n,t,h(Nt,i,r)):c(Dt,e,"/",n,t,r)}),Wt=n(function(e,n,t){var r;return""===t?E:(r=h(Rt,"?",t)).b?d(Pt,e,x(h(Lt,(r=r.a)+1,t)),n,h(Nt,r,t)):d(Pt,e,E,n,t)}),Ft=(s(function(e,n){var t;return""===n?E:(t=h(Rt,"#",n)).b?f(Wt,e,x(h(Lt,(t=t.a)+1,n)),h(Nt,t,n)):f(Wt,e,E,n)}),function(e){for(;;)0}),Jt=ge,de=Jt(0),Bt=t(function(e,n,t,r){var i,o,a,s;return r.b?(i=r.a,(r=r.b).b?(o=r.a,(r=r.b).b?(a=r.a,(r=r.b).b?(s=r.b,h(e,i,h(e,o,h(e,a,h(e,r.a,500<t?f(Pn,e,n,z(s)):d(Bt,e,n,t+1,s)))))):h(e,i,h(e,o,h(e,a,n)))):h(e,i,h(e,o,n))):h(e,i,n)):n}),Ht=n(function(e,n,t){return d(Bt,e,n,0,t)}),Ut=s(function(t,e){return f(Ht,s(function(e,n){return h(w,t(e),n)}),g,e)}),Yt=me,Vt=s(function(n,e){return h(Yt,function(e){return Jt(n(e))},e)}),Gt=n(function(t,e,r){return h(Yt,function(n){return h(Yt,function(e){return Jt(h(t,n,e))},r)},e)}),Kt=_e,Qt=s(function(e,n){return ye(h(Yt,Kt(e),n))}),K=n(function(e,n,t){return h(Vt,function(e){return 0},(e=h(Ut,Qt(e),n),f(Ht,Gt(w),Jt(g),e)))}),Q=n(function(e,n,t){return Jt(0)}),F=s(function(e,n){return h(Vt,e,n)}),Xt=(ze.Task={b:de,c:K,d:Q,e:F,f:void 0},je("Task")),Zt=s(function(e,n){return Xt(h(Vt,e,n))}),er=hn,L=Ce,nr=h(S,m([q("footer")]),m([h(j,m([q("grey-link"),k("https://guide.elm-lang.org/install/elm.html")]),m([L("Install")])),L(" — "),h(j,m([q("grey-link"),k("https://github.com/elm/compiler/")]),m([L("Compiler Source")])),L(" — "),h(j,m([q("grey-link"),k("https://github.com/elm/elm-lang.org/")]),m([L("Site Source")])),L(" — © 2012-2021 Evan Czaplicki")])),tr=t(function(e,n,t,r){e=H(e,n)?m([h(C,"font-weight","bold")]):g;return h(j,h(w,k(r),e),m([L(t)]))}),rr=Ie(g),ir=Ie(g),or=n(function(n,t,r){return er({dz:function(e){return{a:0,b:rr}},eh:function(e){return ir},eC:s(function(e,n){return{a:0,b:rr}}),eD:function(e){return{c$:m([function(e){return h(S,m([q("header")]),m([h(S,m([q("nav")]),m([h(j,m([k("/"),h(C,"color","white"),h(C,"font-size","32px")]),m([L("elm")])),h(S,m([q("tabs")]),m([d(tr,e,0,"examples","/examples"),d(tr,e,1,"docs","/docs"),d(tr,e,2,"community","/community"),d(tr,e,3,"news","/news")]))]))]))}(t),h(S,m([h(C,"flex","1")]),r),nr]),ey:n}}})});!function(e){R.Elm?function e(n,t){for(var r in t)r in n?"init"==r?p(6):e(n[r],t[r]):n[r]=t[r]}(R.Elm,e):R.Elm=e}({Main:{init:c(r(function(e,n,t,r,i){return f(or,e,3,m([h(S,m([h(C,"padding","4em 0 1em"),h(C,"text-align","center")]),m([h(S,m([h(C,"font-size","4em")]),m([L(e)])),h(S,m([h(C,"font-size","1.5em")]),m([L(n)])),h(S,m([q("author")]),m([L("by "),h(j,m([k(t.aT)]),m([L(t.aL)])),L(" / "+function(e){var n=h(Et,e.cb,It);return 1===n.$?A(e.bq):(n=n.a,A(e.bA)+(" "+n+(" "+A(e.bq))))}(r))]))])),h(S,g,i)]))}),"Blazing Fast HTML","Round Two",{aL:"Evan Czaplicki",aT:"https://twitter.com/evancz"},f(pn,2016,8,30),m([h(o,"600px","\n\nTwo years ago, we released an HTML rendering library for Elm, and it was\n[really fast](/news/blazing-fast-html). Faster than React, Angular, and\nEmber. All these frameworks have improved their renderers since then, so\nI figured it would be interesting to run the numbers again:\n\n"),xn("everyone"),h(o,"600px","\n\nOne big takeaway is that **Elm is the fastest**. When comparing React and Elm\nin particular, you see that React takes about 50% longer to do the same work. Perhaps\neven more interesting, Elm is extremely fast **even without optimization**. Just\nby using Elm, you get performance React and Angular 1 do not achieve even with\nhand-optimization.\n\nNow, it is hard to create benchmarks that really show a fair comparison, so the\nrest of this post is dedicated to exploring:\n\n  - [How easy is optimization with each framework?](#ease-of-optimization)\n    It is great if you can do well on benchmarks, but how difficult is it to\n    actually do the optimizations in practice? In some cases the changes are\n    easy and non-invasive. In other cases, you end up rewriting business logic.\n\n  - [Is the methodology fair?](#methodology) The methodology we use actually\n    handicaps Elm quite severely. I had to remove some optimizations from Elm\n    itself to make things fair.\n\n  - [Do these results generalize?](#do-these-results-generalize-) Elm is\n    fast with TodoMVC, but what about in a *serious* project? Are these numbers\n    representative of huge apps? In short, yes.\n\n  - [What are the technical decisions that make Elm the fastest?](#technical-details)\n    I did a full rewrite of our virtual DOM implementation for Elm 0.17, so we\n    will get into the techniques I used to make things so fast.\n\nIf this gets you interested in Elm, start working through [the guide][guide]\nor read about [how folks use Elm at work][work]. See if you like it! Otherwise,\nI hope the information in this post will be helpful to all these different\ncommunities.\n\n[guide]: http://guide.elm-lang.org/\n[work]: /news/how-to-use-elm-at-work\n\n\n> **Note:** I had a bunch of folks review this post before sharing it, and we\nobserved that the results are [quite consistent][graphs] across browsers,\noperating systems, and hardware. If you want to check our work, [run the\nbenchmark yourself][run]. Let us know if you see something weird [here][repo]\nand we&rsquo;ll try to fix it.\n\n[run]: https://evancz.github.io/react-angular-ember-elm-performance-comparison/\n[repo]: https://github.com/evancz/react-angular-ember-elm-performance-comparison/issues\n[graphs]: https://github.com/evancz/react-angular-ember-elm-performance-comparison/tree/master/graphs\n\n\n## Ease of Optimization\n\nBeing fast is nice, but **if no one can figure out how to get from naive code to\noptimized code in a real app, the benchmarks do not matter.**\n\nIn the course of getting all these implementations set up, I was able to get\na feel for the ease of optimization with each project. How much work do I need\nto do to make things faster? How hard do I need to think? How much do I need to\nlearn? What impact does it have on the code? **If you are serious about building\nlarge projects, you should be asking yourself these questions.**\n\nBefore getting into the code, it is important to know that Elm, React, and\nAngular 2 all use a virtual DOM strategy under the hood. That means they all\nuse two main optimization strategies:\n\n  - **Skip Work** &mdash; The best way to speed up virtual DOM diffing is to\n  skip it! So the programmer can say &ldquo;only diff the view if the relevant\n  model changed&rdquo; with `lazy`, `shouldComponentUpdate`, or `OnPush`\n  respectively.\n\n  - **Align Work** &mdash; When you are adding and removing child nodes, a\n  virtual DOM implementation can end up doing tons of pointless diffing. To\n  avoid this you have `Html.Keyed`, `key`, or `trackBy` respectively.\n\nSo optimizing looks a bit different in practice with each of these projects, but\nultimately, they are enabling exactly the same optimizations behind the scenes.\n\nArmed with that knowledge, let&rsquo;s do some analysis. I set up the benchmark\nrepo so that you can check out individual commits that show exactly how we\noptimized each implementation:\n\n[Elm]: https://github.com/evancz/react-angular-ember-elm-performance-comparison/commit/afb72374a1b202760d209491f0540ba97e449b2e\n[React]: https://github.com/evancz/react-angular-ember-elm-performance-comparison/commit/a8052c6e1ffb0aedd77ab763fa644aa8c5a2253f\n[Angular 1]: https://github.com/evancz/react-angular-ember-elm-performance-comparison/commit/76bad72cc25fd1111bed9d06463a36c90eedb70b\n[Angular 2]: https://github.com/evancz/react-angular-ember-elm-performance-comparison/commit/49be6b269aaea259b8185ce02f1496d4f09100cd\n[bad-angular]: https://github.com/evancz/react-angular-ember-elm-performance-comparison/commit/9b29a440324a4d4b872eed6b89ca585edce34df6\n\n  - **[Elm][]** &mdash; Optimizing Elm code means using `Html.Keyed` for the\n  list of todo entries and sprinkling in `lazy` in strategic places. Very easy!\n  More importantly, you are not changing your architecture or rewriting with\n  different abstractions. You have a simple, effective toolkit that lives in\n  your `view` code and does not disrupt your business logic.\n\n  - **[React][]** &mdash; Here we add a `key` to each entry and define\n  `shouldComponentUpdate` for the `Todo` component. Essentially the same as\n  what we did in Elm, but we have to write some logic to figure out if a `Todo`\n  changed. This opens us up to some extremely tricky bugs. Say you add\n  `this.prop.checked` without changing `shouldComponentUpdate`. Now you either\n  have a sneaky performance regression or a view that does not update correctly!\n  Also notice that the React way is tied to components. Instead of sprinkling\n  `lazy` around, a React app would require splitting things into tinier and\n  tinier components to get the same benefits. That is totally possible, but now\n  we are talking about pretty serious architecture changes for the sake of\n  performance.\n\n  - **[Angular 1][]** &mdash; Here we [stop using `$scope.$watch` entirely][watch].\n  This requires changes in our business logic, not just in our view code like\n  in React and Elm! The speed gain is good, but now there is a risk that we\n  forget this line when adding new business logic. So like React, we just have\n  to hope that no one ever messes it up ever. Or that our tests and QA always\n  catch it. This optimization also seems quite counter-intuitive. The way to\n  make it faster is to completely avoid parts of the framework.\n\n[watch]: https://github.com/evancz/react-angular-ember-elm-performance-comparison/blob/master/implementations/angular-1.5.8-optimized/readme.md\n\n  - **[Angular 2][]** &mdash; In this change we just start using `trackBy`.\n  This is the equivalent of `Html.Keyed` in Elm and `key` in React. It *looks*\n  very simple, but notice that we do not start using `OnPush`. The standard\n  TodoMVC implementation did not have a `Todo` component, so we had to do\n  [quite a serious refactor][bad-angular] to be able to use it, even touching\n  the store! (React is just as bad if the thing you want to avoid building is\n  not already a component. Changing architecture for optimization!) Once all\n  that is done, you can add `OnPush` to the `Todo` component, but with one huge\n  caveat. If you do any mutation in your view when `OnPush` is enabled, you\n  will get the same kind of bugs that React&rsquo;s `shouldComponentUpdate`\n  allows: sneaky performance regressions and invalid views.\n\n  - **Ember** &mdash; We could not figure out how to optimize this one. I assume\n  it is possible, but the fact that we could not figure it out is interesting in\n  its own right. If anyone knows how, I would be interested to learn more about\n  that!\n\n[Stephen]: https://github.com/stephencelis\n\nMy analysis is that **optimization is easier and more reliable in Elm** than\nin the others. Things are relatively easy with React and Angular 2, but (1) you\nend up having to rearchitect your application to get the benefits of\n`shouldComponentUpdate` and `OnPush` and (2) both `shouldComponentUpdate` and\n`OnPush` leave you open to bugs that are extremely tricky to track down. The\nfirst problem is unavoidable, but the second one can be mitigated in various\nways. In both React and Angular 2 you can use an immutability library to be more\ncertain that there is no funny business going on. I would add that to my list\nof dependencies and hope that no one on my team ever made a mistake and mutated\nsomething by accident. Angular 2 goes a step farther. They have a &ldquo;dev\nmode&rdquo; that runs over your entire store to make sure nothing got changed\nby view code. It is quite a nice feature, but if you mutate something outside\nof your store or do any side-effects, it cannot catch that. Even paired with\ntesting and QA, **none of these mitigation techniques are as reliable as Elm\nout-of-the-box.** These problems just cannot happen in Elm, and in the end, Elm\napps are faster anyway.\n\n> **Note:** In the React version, we added the `key` attribute *outside* the\n`Todo` component. You could just as easily add it inside though. And if it was\ninside, the `Todo` component would be keyed no matter where you use it, right?\nActually, the reverse is true: it would *never* be keyed. Using\n`shouldComponentUpdate` means we do not build anything, but if `key` is inside,\nwe do not build that either. In other words, you end up *hiding* the key such\nthat it is never used! Simple mistake, but pretty bad consequence. This\ncontrasts with Elm and Angular 2 which make this kind of problem impossible.\n\n\n# Methodology\n\nMy goal with these benchmarks was to compare renderer performance in a\nrealistic scenario. This means rendering each frame in full, exactly like\nyou would if a real user was interacting with the TodoMVC app. I achieved\nthis with two rules:\n\n  - **No Batching Events** &mdash; Instead of generating events in a `for` loop,\n  our user simulator generates events one at a time, waiting for the resulting\n  frame to be rendered. Without this, it *looks* like Elm is 3x or 8x faster than\n  some of the competitors, but that is not under &ldquo;normal&rdquo; circumstances.\n\n  - **No `requestAnimationFrame`** &mdash; Elm uses `requestAnimationFrame`\n  by default, allowing us to skip frames users would not see anyway. That means\n  Elm is great at animation out-of-the-box, but none of the other projects do\n  this by default. Unfortunately for Elm, the whole point of this benchmark is\n  to compare the *renderers*, not figure out who can safely skip the renderer\n  entirely! I removed this logic from the Elm runtime by hand, hurting Elm, but\n  putting everyone on more equal footing.\n\nYou can read a ton more about these rules [here][methodology]. It goes into\nwhat &ldquo;batching events&rdquo; really means and why it makes Elm look a lot\nfaster. It also explains why React, Ember, and Angular would not enable\n`requestAnimationFrame` by default even if they wanted to. I think it is all\ninteresting, but I heard it made this blog post drag.\n\n[methodology]: https://github.com/evancz/react-angular-ember-elm-performance-comparison/#methodology\n\n\n# Do these results generalize?\n\nAs I mentioned in the [Ease of Optimization](#ease-of-optimization) section,\nReact, Elm, and Angular 2 all use a virtual DOM strategy under the hood. That\nmeans that the two major optimization strategies are **skip work** and\n**align work**.\n\nPoint is, comparing these projects without these tricks is actually a pretty\nfair assessment of the underlying virtual DOM implementation. You are building\nthe *entire* virtual DOM, diffing *everything*, and then going and making your\npatches. This strips away optimization done by the programmer and leaves us\nwith the questions: who builds virtual DOM faster? And who diffs it faster? So\nlet&rsquo;s see the unoptimized versions side-by-side:\n\n"),xn("generalize"),h(o,"600px","\n\nThis graph is why I think these performance numbers generalize to all apps.\nSure, this is a TodoMVC app that is not too complicated, but we are comparing\nthe core diffing algorithm here. Who builds nodes faster? Who diffs faster?\nEach project let you skip as much of that as possible (using the same techniques\nbehind the scenes) but ultimately you have to run this code. **So as your\napp gets bigger, the speed difference can only get bigger.**\n\n> **Note:** To folks who think the React implementation is not representative\nbecause it is not using a certain library, the README from todomvc.com\n[addresses this directly][rep]. Whether you are using Redux or Immutable.js or\nwhatever else, the fundamental performance characteristics of *rendering* with\nReact are the same. No matter how you combine libraries, you will eventually\nneed to build virtual DOM nodes and diff them.\n\n[rep]: https://github.com/evancz/react-angular-ember-elm-performance-comparison/tree/master/implementations/react-15.3.1-optimized#react-todomvc-for-benchmarking\n\n\n# Technical Details\n\nOkay, so the Elm implementation is very fast, but why?\n\nUntil recently we were using `MattEsch/virtual-dom` as our underlying\nimplementation. It is pretty nice, but I needed to rewrite from scratch to\nsupport an API change in Elm 0.17 that made things significantly easier to\nlearn. The following graph compares the old and new implementations:\n\n"),xn("elm"),h(o,"600px","\n\nThings are quite a lot faster! I think this is mainly attributable to the\nfollowing techniques:\n\n  - **Prefer arrays over dictionary objects.** Crawling an array is much faster\n  than crawling an object. `for (var key in object)` is just never going to be\n  as fast as `for (var i = 0; i < len; i++)`. Whenever there is a dynamic number\n  of things, find a way to allocate them one-by-one at the end of an array.\n\n  - **Do not allocate.** A big cost in these implementations is garbage\n  collection. The fewer objects you allocate the better. So one trick we used\n  was allocating objects with nulled out fields that we would fill in later.\n  This does two things. First, it means the *shape* of our object stays the\n  same over time, making it easier for JavaScript engines to optimize them.\n  Second, it means we can keep using the same array even as we gather more\n  information.\n\n  - **Never look anything up**. This means avoiding `object[key]` or `array[i]`\n  as much as possible. We only want to crawl arrays in order. You can often\n  avoid lookups with creative use of references. So instead of looking\n  something up in an object, what if you already had a reference to what you\n  wanted?\n\nI was happy to see that common sense strategies paid off so well. Use the\nfastest data structure possible. Avoid slow operations. Avoid operations in\ngeneral. Think about allocation and garbage collection. Nothing crazy really,\nbut hopefully it will be helpful to folks nonetheless!\n\n\n# Conclusion\n\nBenchmarking is difficult, but hopefully I have made a convincing case that:\n\n  - Elm is very fast.\n  - Optimizing Elm only touches `view` code, unlike everyone else.\n  - Optimizing Elm cannot introduce sneaky bugs, unlike everyone else.\n  - These results should generalize to apps of any size.\n\nThat is all great, but this is kind of selling Elm short. We also have a\ncompiler that gives [extraordinarily helpful hints](/news/compilers-as-assistants)\nthat prevents runtime errors. It is good enough that NoRedInk is running 36k\nlines of Elm in production and has never gotten a runtime error from their Elm\ncode in more than a year of use. (Rollbar reports everything, and it is always\nfrom JS!)\n\nI know a lot of people think, &ldquo;that seems nice, but it is a whole\ndifferent *language*. I cannot rewrite a project entirely!&rdquo; That is\nabsolutely true, so folks who end up using Elm in production introduce it\ngradually, [like this][work]. So if you are interested,\n[get Elm installed](/install) and check out [the guide][guide]. Try making\nsomething small, and if you run into any problems, come talk to folks in the\nElm community! We are friendly and happy to help out. The [Elm Slack][slack]\nand [mailing list][elm-discuss] are both great places to ask questions, and\nyou can often save yourself hours or days of [XY problems][xy] by asking a\nhuman.\n\nWhatever you end up doing, I hope you learned something from this post! I\ncertainly learned a ton from writing up the &ldquo;Ease of Optimization&rdquo;\nsection about the concrete tradeoffs between each of these different projects,\nso I hope that breadth of experience can help folks make technical decisions\nwithout doing all this work!\n\n[guide]: http://guide.elm-lang.org/\n[work]: /news/how-to-use-elm-at-work\n[slack]: /community/slack\n[elm-discuss]: https://groups.google.com/forum/?fromgroups#!forum/elm-discuss\n[xy]: http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\n\n\n# Thank You\n\nI want to give a huge thank you to [Sergey][] for his work on both Angular\nimplementations! I definitely could not have done the optimization without\nyou, and I learned a bunch from how you did things! I also want to thank\n[Stephen][] who contributed the Ember implementation. Holy cow, so many files!\n\n[Sergey]: https://github.com/IwalkAlone\n[Stephen]: https://github.com/stephencelis\n\n")]))(pt(0))(0)}})}(this);
var app = Elm.Main.init({ flags: { width: window.innerWidth, height : window.innerHeight } });
</script>

</body>
</html>
